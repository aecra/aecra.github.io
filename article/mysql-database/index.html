<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='MySQL 数据库这么火怎么能不学习一下呢？本篇文章记录了 MySQL 数据库的一般使用方法，涉及到优化原理的内容以后再补吧。'><meta name='keywords' content='MySQL, 数据库'><title>MySQL 数据库</title>



<link rel='canonical' href='https://aecra.ml/article/mysql-database/'>

<link rel="stylesheet" href="/scss/style.min.49efbd60809f94209900a2125634493930b2a299cd430d619fc24c3ad2c77d28.css"><meta property='og:title' content='MySQL 数据库'>
<meta property='og:description' content='MySQL 数据库这么火怎么能不学习一下呢？本篇文章记录了 MySQL 数据库的一般使用方法，涉及到优化原理的内容以后再补吧。'>


<meta property='og:url' content='https://aecra.ml/article/mysql-database/'>
<meta property='og:site_name' content='Tian Jiale&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='MySQL' /><meta property='article:tag' content='数据库' /><meta property='article:published_time' content='2021-02-17T13:22:57&#43;00:00'/><meta property='article:modified_time' content='2021-02-17T13:22:57&#43;00:00'/><meta property='og:image' content='https://static.aecra.ml/cover/mysql-database.jpg' />
<meta name="twitter:title" content="MySQL 数据库">
<meta name="twitter:description" content="MySQL 数据库这么火怎么能不学习一下呢？本篇文章记录了 MySQL 数据库的一般使用方法，涉及到优化原理的内容以后再补吧。"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://static.aecra.ml/cover/mysql-database.jpg' />
    <link rel="shortcut icon" href="https://static.aecra.ml/logo.png" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-V4ML7JFB21"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-V4ML7JFB21', { 'anonymize_ip': false });
}
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended">
    <aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="https://static.aecra.ml/avatar.png" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">😊</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Tian Jiale&#39;s Blog</a></h1>
            <h2 class="site-description">Leave a line of dialogue for the years to come.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/aecra'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关 于</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归 档</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜 索</span>
            </a>
        </li>
        
        

        <li >
            <a href='/link/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>友 链</span>
            </a>
        </li>
        
        

        <li >
            <a href='/index.xml' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                
                <span>RSS</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://aecra.ml/" selected>中文</option>
                        
                            <option value="https://aecra.ml/en/" >English</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗 色</span>
                </li>
            
        </div>
    </ol>
</aside>

<main class="main full-width">
    <article class="main-article">
    <header class="article-header">
        <div class="article-image">
            
            
            <a href="/article/mysql-database/">
                
                    <img src="https://static.aecra.ml/cover/mysql-database.jpg" loading="lazy" alt="Featured image of post MySQL 数据库" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/article/mysql-database/">MySQL 数据库</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            MySQL 数据库这么火怎么能不学习一下呢？本篇文章记录了 MySQL 数据库的一般使用方法，涉及到优化原理的内容以后再补吧。
        </h3>
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Feb 17, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 14 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <h2 id="数据库的好处">数据库的好处</h2>
<ol>
<li>
<p>持久化数据到本地</p>
</li>
<li>
<p>可以实现结构化查询，方便管理</p>
</li>
</ol>
<h2 id="数据库相关概念">数据库相关概念</h2>
<ol>
<li>
<p>DB：数据库，保存一组有组织的数据的容器</p>
</li>
<li>
<p>DBMS：数据库管理系统，又称为数据库软件（产品），用于管理 DB 中的数据</p>
</li>
<li>
<p>SQL:结构化查询语言，用于和 DBMS 通信的语言</p>
</li>
</ol>
<h2 id="数据库存储数据的特点">数据库存储数据的特点</h2>
<ol>
<li>
<p>将数据放到表中，表再放到库中</p>
</li>
<li>
<p>一个数据库中可以有多个表，每个表都有一个的名字，用来标识自己。表名具有唯一性。</p>
</li>
<li>
<p>表具有一些特性，这些特性定义了数据在表中如何存储，类似 java 中 “类”的设计。</p>
</li>
<li>
<p>表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似 java 中的”属性”</p>
</li>
<li>
<p>表中的数据是按行存储的，每一行类似于 java 中的“对象”。</p>
</li>
</ol>
<h2 id="mysql-产品的介绍和安装">MySQL 产品的介绍和安装</h2>
<h3 id="mysql-服务的启动和停止">MySQL 服务的启动和停止</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">方式一：计算机——右击管理——服务
</span></span><span class="line"><span class="cl">方式二：通过管理员身份运行
</span></span><span class="line"><span class="cl">net start 服务名（启动服务）
</span></span><span class="line"><span class="cl">net stop 服务名（停止服务）
</span></span></code></pre></div><h3 id="mysql-服务的登录和退出">MySQL 服务的登录和退出</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">方式一：通过mysql自带的客户端
</span></span><span class="line"><span class="cl">只限于root用户
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">方式二：通过windows自带的客户端
</span></span><span class="line"><span class="cl">登录：
</span></span><span class="line"><span class="cl">mysql 【-h主机名 -P端口号 】-u用户名 -p密码
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">退出：
</span></span><span class="line"><span class="cl">exit或ctrl+C
</span></span></code></pre></div><h3 id="mysql-的常见命令">MySQL 的常见命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 查看当前所有的数据库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">show</span><span class="w"> </span><span class="k">databases</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 打开指定的库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span><span class="w"> </span><span class="err">库名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看当前库的所有表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">show</span><span class="w"> </span><span class="kp">tables</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看其它库的所有表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">show</span><span class="w"> </span><span class="kp">tables</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">库名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 创建表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">列名</span><span class="w"> </span><span class="err">列类型</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">列名</span><span class="w"> </span><span class="err">列类型，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">。。。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看表结构
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">desc</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看服务器的版本
</span></span></span><span class="line"><span class="cl"><span class="c1"># 方式一：登录到mysql服务端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="nf">version</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 方式二：没有登录到mysql服务端
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">mysql</span><span class="w"> </span><span class="o">--</span><span class="n">version</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 或
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">mysql</span><span class="w"> </span><span class="o">--</span><span class="n">V</span><span class="w">
</span></span></span></code></pre></div><h3 id="mysql-的语法规范">MySQL 的语法规范</h3>
<ol>
<li>
<p>不区分大小写,但建议关键字大写，表名、列名小写</p>
</li>
<li>
<p>每条命令最好用分号结尾</p>
</li>
<li>
<p>每条命令根据需要，可以进行缩进 或换行</p>
</li>
<li>
<p>注释</p>
</li>
</ol>
<p>单行注释：#注释文字</p>
<p>单行注释：&ndash; 注释文字</p>
<p>多行注释：/* 注释文字 */</p>
<h3 id="sql-的语言分类">SQL 的语言分类</h3>
<p>DQL（Data Query Language）：数据查询语言</p>
<p>select</p>
<p>DML(Data Manipulate Language):数据操作语言</p>
<p>insert 、update、delete</p>
<p>DDL（Data Define Languge）：数据定义语言</p>
<p>create、drop、alter</p>
<p>TCL（Transaction Control Language）：事务控制语言</p>
<p>commit、rollback</p>
<h3 id="sql-的常见命令">SQL 的常见命令</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 查看所有的数据库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">show</span><span class="w"> </span><span class="k">databases</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 打开指定 的库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">use</span><span class="w"> </span><span class="err">库名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 显示库中的所有表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">show</span><span class="w"> </span><span class="kp">tables</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 显示指定库中的所有表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">show</span><span class="w"> </span><span class="kp">tables</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">库名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 创建表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看指定表的结构
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">desc</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 显示表中的所有数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h2 id="dql-语句">DQL 语句</h2>
<h3 id="进阶-1基础查询">进阶 1：基础查询</h3>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="err">要查询的东西</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="err">表名</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>类似于 Java 中 :System.out.println(要打印的东西);</p>
<p>特点：</p>
<ol>
<li>
<p>通过 select 查询完的结果 ，是一个虚拟的表格，不是真实存在</p>
</li>
<li>
<p>要查询的东西 可以是常量值、可以是表达式、可以是字段、可以是函数</p>
</li>
</ol>
<p>起别名</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">姓</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="err">姓</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>去重</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>+号的作用</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 两者都为数值型，则做加法运算
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="mi">100</span><span class="o">+</span><span class="mi">90</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 一个是字符型，一个是数值型，将字符型转换为数值型做加法运算
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;100&#39;</span><span class="o">+</span><span class="mi">90</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 一个是字符型，一个是数值型，将字符型转换为数值型做加法运算，转换失败则置为零
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="s1">&#39;jhon&#39;</span><span class="o">+</span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 一方为null，则结果肯定为null
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="no">null</span><span class="o">+</span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="进阶-2条件查询">进阶 2：条件查询</h3>
<p>条件查询：根据条件过滤原始表的数据，查询到想要的数据</p>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">要查询的字段</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">常量值</span><span class="o">|</span><span class="err">函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">条件</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>分类：</p>
<p>一、条件表达式</p>
<p>示例：salary&gt;10000</p>
<p>条件运算符：</p>
<blockquote>
<p>&ldquo;&gt; &lt; &gt;= &lt;= = != &lt;&gt;</p>
</blockquote>
<p>二、逻辑表达式</p>
<p>示例：salary&gt;10000 &amp;&amp; salary&lt;20000</p>
<p>逻辑运算符：</p>
<blockquote>
<p>and（&amp;&amp;）:两个条件如果同时成立，结果为 true，否则为 false
or(||)：两个条件只要有一个成立，结果为 true，否则为 false
not(!)：如果条件成立，则 not 后为 false，否则为 true</p>
</blockquote>
<p>三、模糊查询</p>
<p>示例：last_name like &lsquo;_a%&rsquo;</p>
<blockquote>
<p>like、between and、in、is null</p>
</blockquote>
<h3 id="进阶-3排序查询">进阶 3：排序查询</h3>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">要查询的东西</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">排序的字段</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span><span class="o">|</span><span class="err">别名</span><span class="w"> </span><span class="err">【</span><span class="k">asc</span><span class="o">|</span><span class="k">desc</span><span class="err">】</span><span class="w">
</span></span></span></code></pre></div><h3 id="进阶-4常见函数">进阶 4：常见函数</h3>
<p>一、单行函数</p>
<ol>
<li>
<p>字符函数</p>
<p>concat 拼接</p>
<p>substr 截取子串</p>
<p>upper 转换成大写</p>
<p>lower 转换成小写</p>
<p>trim 去前后指定的空格和字符</p>
<p>ltrim 去左边空格</p>
<p>rtrim 去右边空格</p>
<p>replace 替换</p>
<p>lpad 左填充</p>
<p>rpad 右填充</p>
<p>instr 返回子串第一次出现的索引</p>
<p>length 获取字节个数</p>
</li>
<li>
<p>数学函数</p>
<p>round 四舍五入</p>
<p>rand 随机数</p>
<p>floor 向下取整</p>
<p>ceil 向上取整</p>
<p>mod 取余</p>
<p>truncate 截断</p>
</li>
<li>
<p>日期函数</p>
<p>now 当前系统日期+时间</p>
<p>curdate 当前系统日期</p>
<p>curtime 当前系统时间</p>
<p>str_to_date 将字符转换成日期</p>
<p>date_format 将日期转换成字符</p>
</li>
<li>
<p>流程控制函数</p>
<p>if 处理双分支</p>
<p>case 语句 处理多分支,情况 1：处理等值判断,情况 2：处理条件判断</p>
</li>
<li>
<p>其他函数</p>
<p>version 版本</p>
<p>database 当前库</p>
<p>user 当前连接用户</p>
</li>
</ol>
<p>二、分组函数</p>
<p>sum 求和</p>
<p>max 最大值</p>
<p>min 最小值</p>
<p>avg 平均值</p>
<p>count 计数</p>
<p>特点：</p>
<ol>
<li>
<p>以上五个分组函数都忽略 null 值，除了 count(*)</p>
</li>
<li>
<p>sum 和 avg 一般用于处理数值型
max、min、count 可以处理任何数据类型</p>
</li>
<li>
<p>都可以搭配 distinct 使用，用于统计去重后的结果</p>
</li>
<li>
<p>count 的参数可以支持：
字段、<em>、常量值，一般放 1
建议使用 count(</em>)</p>
</li>
</ol>
<h3 id="进阶-5分组查询">进阶 5：分组查询</h3>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">查询的字段，分组函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">分组的字段</span><span class="w">
</span></span></span></code></pre></div><p>特点：</p>
<ol>
<li>
<p>可以按单个字段分组</p>
</li>
<li>
<p>和分组函数一同查询的字段最好是分组后的字段</p>
</li>
<li>
<p>分组筛选</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th></th>
<th>针对的表</th>
<th>位置</th>
<th>关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td>分组前筛选</td>
<td>原始表</td>
<td>group by 的前面</td>
<td>where</td>
</tr>
<tr>
<td>分组后筛选</td>
<td>分组后的结果集</td>
<td>group by 的后面</td>
<td>having</td>
</tr>
</tbody>
</table></div>
</li>
<li>
<p>可以按多个字段分组，字段之间用逗号隔开</p>
</li>
<li>
<p>可以支持排序</p>
</li>
<li>
<p>having 后可以支持别名</p>
</li>
<li>
<p>分组函数做条件肯定放在 having 子句中</p>
</li>
<li>
<p>能用分组前筛选的，就优先使用分组前筛选</p>
</li>
</ol>
<h3 id="进阶-6多表连接查询">进阶 6：多表连接查询</h3>
<p>笛卡尔乘积：如果连接条件省略或无效则会出现</p>
<p>解决办法：添加上连接条件</p>
<p>一、分类</p>
<p>按年代分类：</p>
<ol>
<li>
<p>sql192 标准：内连接</p>
</li>
<li>
<p>sql199 标准【推荐】：内连接+外链接（左外、右外）+交叉连接</p>
</li>
</ol>
<p>按功能分类</p>
<ol>
<li>
<p>内连接</p>
<p>等值连接、非等值连接、自连接</p>
</li>
<li>
<p>外连接</p>
<p>左外连接、右外连接、全外连接</p>
</li>
<li>
<p>交叉连接</p>
</li>
</ol>
<p>二、sql192 标准</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 等值连接
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="p">.</span><span class="err">字段</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="p">.</span><span class="err">字段</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="p">,</span><span class="err">表</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="p">.</span><span class="err">字段</span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="p">.</span><span class="err">字段</span><span class="mi">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 非等值连接
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">类比等值连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 自连接
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">employees</span><span class="w"> </span><span class="n">m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`=</span><span class="n">m</span><span class="p">.</span><span class="o">`</span><span class="n">employee_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>三、sql199 标准</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段，</span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">inner</span><span class="o">|</span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="o">|</span><span class="k">right</span><span class="w"> </span><span class="k">outer</span><span class="o">|</span><span class="k">cross</span><span class="p">]</span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="k">on</span><span class="w">  </span><span class="err">连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">inner</span><span class="o">|</span><span class="k">left</span><span class="w"> </span><span class="k">outer</span><span class="o">|</span><span class="k">right</span><span class="w"> </span><span class="k">outer</span><span class="o">|</span><span class="k">cross</span><span class="p">]</span><span class="k">join</span><span class="w"> </span><span class="err">表</span><span class="mi">3</span><span class="w"> </span><span class="k">on</span><span class="w">  </span><span class="err">连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">筛选条件</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">分组字段</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">having</span><span class="w"> </span><span class="err">分组后的筛选条件</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">排序的字段或表达式</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>好处：语句上，连接条件和筛选条件实现了分离，简洁明了！</p>
<h3 id="进阶-7子查询">进阶 7：子查询</h3>
<p>含义：</p>
<blockquote>
<p>一条查询语句中又嵌套了另一条完整的 select 语句，其中被嵌套的 select 语句，称为子查询或内查询</p>
<p>在外面的查询语句，称为主查询或外查询</p>
</blockquote>
<p>特点：</p>
<ol>
<li>
<p>子查询都放在小括号内</p>
</li>
<li>
<p>子查询可以放在 from 后面、select 后面、where 后面、having 后面，但一般放在条件的右侧</p>
</li>
<li>
<p>子查询优先于主查询执行，主查询使用了子查询的执行结果</p>
</li>
<li>
<p>子查询根据查询结果的行数不同分为以下两类：</p>
<p>单行子查询</p>
<p>结果集只有一行</p>
<p>一般搭配单行操作符使用：&gt; &lt; = &lt;&gt; &gt;= &lt;=</p>
<p>非法使用子查询的情况：</p>
<ol>
<li>子查询的结果为一组值</li>
<li>子查询的结果为空</li>
</ol>
<p>多行子查询</p>
<p>结果集有多行</p>
<p>一般搭配多行操作符使用：any、all、in、not in</p>
<p>in： 属于子查询结果中的任意一个就行</p>
<p>any 和 all 往往可以用其他查询代替</p>
</li>
</ol>
<h3 id="进阶-8分页查询">进阶 8：分页查询</h3>
<p>应用场景：</p>
<p>web 项目中需要根据用户的需求提交对应的分页查询的 sql 语句</p>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="o">|</span><span class="err">表达式</span><span class="p">,...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">分组字段</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">having</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="err">排序的字段</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">limit</span><span class="w"> </span><span class="p">[</span><span class="err">起始的条目索引</span><span class="p">,]</span><span class="err">条目数</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>特点：</p>
<ol>
<li>
<p>起始条目索引从 0 开始</p>
</li>
<li>
<p>limit 子句放在查询语句的最后</p>
</li>
<li>
<p>公式：select * from 表 limit （page-1）*sizePerPage,sizePerPage</p>
<p>假如:</p>
<p>每页显示条目数 sizePerPage</p>
<p>要显示的页数 page</p>
</li>
</ol>
<h3 id="进阶-9联合查询">进阶 9：联合查询</h3>
<p>引入：</p>
<p>union 联合、合并</p>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span><span class="w"> </span><span class="p">[</span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="p">[</span><span class="k">all</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span><span class="w"> </span><span class="p">[</span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="p">[</span><span class="k">all</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span><span class="w"> </span><span class="p">[</span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w"> </span><span class="k">union</span><span class="w">  </span><span class="p">[</span><span class="k">all</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">.....</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span><span class="w"> </span><span class="p">[</span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>特点：</p>
<ol>
<li>
<p>多条查询语句的查询的列数必须是一致的</p>
</li>
<li>
<p>多条查询语句的查询的列的类型几乎相同</p>
</li>
<li>
<p>union 代表去重，union all 代表不去重</p>
</li>
</ol>
<h2 id="dml-语句">DML 语句</h2>
<h3 id="插入">插入</h3>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="err">表名</span><span class="p">(</span><span class="err">字段名，</span><span class="p">...)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">values</span><span class="p">(</span><span class="err">值</span><span class="mi">1</span><span class="err">，</span><span class="p">...);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="err">表名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">set</span><span class="w"> </span><span class="err">列名</span><span class="o">=</span><span class="err">值</span><span class="p">,</span><span class="err">列名</span><span class="o">=</span><span class="err">值</span><span class="p">,...;</span><span class="w">
</span></span></span></code></pre></div><p>特点：</p>
<ol>
<li>
<p>字段类型和值类型一致或兼容，而且一一对应</p>
</li>
<li>
<p>可以为空的字段，可以不用插入值，或用 null 填充</p>
</li>
<li>
<p>不可以为空的字段，必须插入值</p>
</li>
<li>
<p>字段个数和值的个数必须一致</p>
</li>
<li>
<p>字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致</p>
</li>
</ol>
<h3 id="修改">修改</h3>
<p>修改单表语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">update</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="err">字段</span><span class="o">=</span><span class="err">新值</span><span class="p">,</span><span class="err">字段</span><span class="o">=</span><span class="err">新值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">条件</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>修改多表语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">update</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="err">别名</span><span class="mi">1</span><span class="p">,</span><span class="err">表</span><span class="mi">2</span><span class="w"> </span><span class="err">别名</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">set</span><span class="w"> </span><span class="err">字段</span><span class="o">=</span><span class="err">新值，字段</span><span class="o">=</span><span class="err">新值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="err">连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="err">筛选条件</span><span class="w">
</span></span></span></code></pre></div><p>可以理解为把 select 改成 set 并变换位置</p>
<h3 id="删除">删除</h3>
<p>方式一：delete 语句</p>
<p>单表的删除：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">delete</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">表名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">where</span><span class="w"> </span><span class="err">筛选条件</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>多表的删除：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">delete</span><span class="w"> </span><span class="err">别名</span><span class="mi">1</span><span class="err">，别名</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="err">表</span><span class="mi">1</span><span class="w"> </span><span class="err">别名</span><span class="mi">1</span><span class="err">，表</span><span class="mi">2</span><span class="w"> </span><span class="err">别名</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="err">连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">and</span><span class="w"> </span><span class="err">筛选条件</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>方式二：truncate 语句</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="n">truncate</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="w">
</span></span></span></code></pre></div><p>两种方式的区别【面试题】</p>
<ol>
<li>
<p>truncate 不能加 where 条件，而 delete 可以加 where 条件</p>
</li>
<li>
<p>truncate 的效率高一丢丢</p>
</li>
<li>
<p>truncate 删除带自增长的列的表后，如果再插入数据，数据从 1 开始
delete 删除带自增长列的表后，如果再插入数据，数据从上一次的断点处开始</p>
</li>
<li>
<p>truncate 删除不能回滚，delete 删除可以回滚</p>
</li>
</ol>
<h2 id="ddl-语句">DDL 语句</h2>
<h3 id="库和表的管理">库和表的管理</h3>
<p>库的管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 创建库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">[</span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="p">]</span><span class="w"> </span><span class="err">库名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 删除库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">drop</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">[</span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="p">]</span><span class="w"> </span><span class="err">库名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 修改字符集
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">alter</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="err">库名</span><span class="w"> </span><span class="k">character</span><span class="w"> </span><span class="kt">set</span><span class="w"> </span><span class="n">utf8</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>表的管理：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 创建表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="err">表名</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">],</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 修改表名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">原表名</span><span class="w"> </span><span class="k">rename</span><span class="w"> </span><span class="p">[</span><span class="k">to</span><span class="p">]</span><span class="w"> </span><span class="err">新表名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 修改表内字段
</span></span></span><span class="line"><span class="cl"><span class="c1"># add    添加字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="k">add</span><span class="w">   </span><span class="k">column</span><span class="w"> </span><span class="err">字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="p">[</span><span class="err">约束</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># modify  修改字段类型和约束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="err">字段名</span><span class="w"> </span><span class="p">[</span><span class="err">字段类型</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="err">约束</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># drop   删除字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="k">drop</span><span class="w">  </span><span class="k">column</span><span class="w"> </span><span class="err">字段名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># change  修改字段名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">表名</span><span class="w"> </span><span class="k">change</span><span class="w"> </span><span class="k">column</span><span class="w"> </span><span class="err">原字段名</span><span class="w"> </span><span class="err">新字段名</span><span class="w"> </span><span class="err">字段类型</span><span class="w"> </span><span class="p">[</span><span class="err">约束</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 删除表
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="p">[</span><span class="k">if</span><span class="w"> </span><span class="k">exists</span><span class="p">]</span><span class="w"> </span><span class="n">studentinfo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 复制表结构
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">新表名</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="err">旧表名</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 复制表结构和内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="err">新表名</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">旧表名</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="常见类型">常见类型</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">数值型：
</span></span><span class="line"><span class="cl">    整型：Tinyint、Smallint、Mediumint、Int/integer、Bigint
</span></span><span class="line"><span class="cl">    小数：
</span></span><span class="line"><span class="cl">        浮点型：float、double
</span></span><span class="line"><span class="cl">        定点型：dec、decimal
</span></span><span class="line"><span class="cl">字符型：
</span></span><span class="line"><span class="cl">    较短的文本：char、varchar
</span></span><span class="line"><span class="cl">    较长的文本：text、blob
</span></span><span class="line"><span class="cl">日期型：
</span></span><span class="line"><span class="cl">    date、datetime、timestamp、time、year
</span></span></code></pre></div><h3 id="常见约束">常见约束</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">not</span><span class="w"> </span><span class="no">null</span><span class="w">    </span><span class="c1"># 非空约束：用于保证该字段不能为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">default</span><span class="w">     </span><span class="c1"># 默认约束：用于保证该字段有默认值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">unique</span><span class="w">      </span><span class="c1">#唯一约束：用于保证该字段的值具有唯一性且可空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">check</span><span class="w">       </span><span class="c1"># 检查约束：mysql不支持
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="w">  </span><span class="c1"># 主键约束：用于保证该字段的值具有唯一性且非空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="w">  </span><span class="c1"># 外键约束：用于限制两个表的关系，该字段必须来自于主表的关联字段的值
</span></span></span></code></pre></div><p>列级约束</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 直接在字段名和类型后面追加即可
</span></span></span><span class="line"><span class="cl"><span class="c1"># 只支持：默认、非空、主键、唯一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err">字段名</span><span class="w"> </span><span class="err">字段的类型</span><span class="p">[(</span><span class="err">长度</span><span class="p">)</span><span class="w"> </span><span class="err">约束</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>表级约束</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 在各个字段最下面，主要写外键约束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">[</span><span class="k">constraint</span><span class="w"> </span><span class="err">约束名</span><span class="p">]</span><span class="w"> </span><span class="err">约束类型</span><span class="p">(</span><span class="err">字段名</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">constraint</span><span class="w"> </span><span class="err">约束名</span><span class="p">]</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="err">字段名</span><span class="p">)</span><span class="w"> </span><span class="k">references</span><span class="w"> </span><span class="err">主表名</span><span class="p">(</span><span class="err">外键字段名</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h3 id="标识列">标识列</h3>
<p>又称为自增长列</p>
<p>含义：可以不用手动地插入值，系统提供默认的序列值</p>
<p>关键字：auto_increment</p>
<p>特点：</p>
<ol>
<li>
<p>标识列必须和主键搭配吗？不一定，但要求是一个 key</p>
</li>
<li>
<p>一个表中最多一个标识列</p>
</li>
<li>
<p>标识列只能是数字型</p>
</li>
<li>
<p>标识列可以通过 set auto_increment_increment=3;设置步长，可以通过手动插入值设置起始值</p>
</li>
</ol>
<h2 id="事务">事务</h2>
<blockquote>
<p>通过一组逻辑操作单元（一组 DML——sql 语句），将数据从一种状态切换到另外一种状态</p>
</blockquote>
<h3 id="特点">特点</h3>
<p>（ACID）</p>
<ol>
<li>
<p>原子性：要么都执行，要么都回滚</p>
</li>
<li>
<p>一致性：保证数据的状态操作前和操作后保持一致</p>
</li>
<li>
<p>隔离性：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰</p>
</li>
<li>
<p>持久性：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改</p>
</li>
</ol>
<p>相关步骤：</p>
<ol>
<li>开启事务</li>
<li>编写事务的一组逻辑操作单元（多条 sql 语句）</li>
<li>提交事务或回滚事务</li>
</ol>
<h3 id="事务的分类">事务的分类</h3>
<p>隐式事务，没有明显的开启和结束事务的标志</p>
<p>比如 insert、update、delete 语句本身就是一个事务</p>
<p>显式事务，具有明显的开启和结束事务的标志</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 1、开启事务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">set</span><span class="w"> </span><span class="n">autocommit</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">start</span><span class="w"> </span><span class="n">transaction</span><span class="p">;</span><span class="c1"># 可选
</span></span></span><span class="line"><span class="cl"><span class="c1"># 取消自动提交事务的功能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 2、编写事务的一组逻辑操作单元（多条sql语句）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">insert</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">update</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">delete</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">#3、提交事务或回滚事务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">commit</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">rollback</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 其他
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">savepoint</span><span class="w">  </span><span class="c1"># 断点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">commit</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="c1"># 断点
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">rollback</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="c1"># 断点
</span></span></span></code></pre></div><h3 id="事务的隔离级别">事务的隔离级别</h3>
<p>事务并发问题如何发生？</p>
<ul>
<li>当多个事务同时操作同一个数据库的相同数据时</li>
</ul>
<p>事务的并发问题有哪些？</p>
<ul>
<li>脏读：一个事务读取到了另外一个事务未提交的数据</li>
<li>不可重复读：同一个事务中，多次读取到的数据不一致</li>
<li>幻读：一个事务读取数据时，另外一个事务进行更新，导致第一个事务读取到了没有更新的数据</li>
</ul>
<p>如何避免事务的并发问题？</p>
<ul>
<li>通过设置事务的隔离级别
<ol>
<li>read uncommitted</li>
<li>read committed 可以避免脏读</li>
<li>repeatale read 可以避免脏读、不可重复读和一部分幻读</li>
<li>serializable 可以避免脏读、不可重复读和幻读</li>
</ol>
</li>
</ul>
<p>设置隔离级别：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="kt">set</span><span class="w"> </span><span class="n">session</span><span class="o">|</span><span class="n">global</span><span class="w"> </span><span class="n">transaction</span><span class="w"> </span><span class="n">isolation</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="err">隔离级别名</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>查看隔离级别：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">@@</span><span class="n">tx_isolation</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h2 id="视图">视图</h2>
<p>含义：<strong>理解成一张虚拟的表</strong></p>
<p>视图和表的区别：</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">使用方式</th>
<th style="text-align:center">占用物理空间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">视图</td>
<td style="text-align:center">完全相同</td>
<td style="text-align:center">不占用，仅仅保存的是 sql 逻辑</td>
</tr>
<tr>
<td style="text-align:center">表</td>
<td style="text-align:center">完全相同</td>
<td style="text-align:center">占用</td>
</tr>
</tbody>
</table></div>
<p>视图的好处：</p>
<ol>
<li>
<p>sql 语句提高重用性，效率高</p>
</li>
<li>
<p>和表实现了分离，提高了安全性</p>
</li>
</ol>
<h3 id="视图的创建">视图的创建</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 语法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="n">VIEW</span><span class="w">  </span><span class="err">视图名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">查询语句</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="视图的更新">视图的更新</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 方式一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="k">REPLACE</span><span class="w"> </span><span class="n">VIEW</span><span class="w"> </span><span class="n">test_v7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">employee_id</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 方式二
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">ALTER</span><span class="w"> </span><span class="n">VIEW</span><span class="w"> </span><span class="n">test_v7</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="视图的删除">视图的删除</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="n">VIEW</span><span class="w"> </span><span class="n">test_v1</span><span class="p">,</span><span class="n">test_v2</span><span class="p">,</span><span class="n">test_v3</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="视图结构的查看">视图结构的查看</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">DESC</span><span class="w"> </span><span class="n">test_v7</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SHOW</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="n">VIEW</span><span class="w"> </span><span class="n">test_v7</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="视图数据的增删改查">视图数据的增删改查</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 查看视图的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_v4</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_v1</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">last_name</span><span class="o">=</span><span class="s1">&#39;Partners&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 插入视图的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="nf">my_v4</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="s1">&#39;虚竹&#39;</span><span class="p">,</span><span class="mi">90</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 修改视图的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">my_v4</span><span class="w"> </span><span class="kt">SET</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="s1">&#39;梦姑&#39;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">last_name</span><span class="o">=</span><span class="s1">&#39;虚竹&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 删除视图的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_v4</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="某些视图不能更新">某些视图不能更新</h3>
<ol>
<li>
<p>包含以下关键字的 sql 语句：分组函数、distinct、group by、having、union 或者 union all</p>
</li>
<li>
<p>常量视图</p>
</li>
<li>
<p>Select 中包含子查询</p>
</li>
<li>
<p>join</p>
</li>
<li>
<p>from 一个不能更新的视图</p>
</li>
<li>
<p>where 子句的子查询引用了 from 子句中的表</p>
</li>
</ol>
<h2 id="存储">存储</h2>
<p>含义：一组经过预先编译的 sql 语句的集合
好处：</p>
<p>1、提高了 sql 语句的重用性，减少了开发程序员的压力
2、提高了效率
3、减少了传输次数</p>
<p>分类：</p>
<ol>
<li>
<p>无返回无参</p>
</li>
<li>
<p>仅仅带 in 类型，无返回有参</p>
</li>
<li>
<p>仅仅带 out 类型，有返回无参</p>
</li>
<li>
<p>既带 in 又带 out，有返回有参</p>
</li>
<li>
<p>带 inout，有返回有参</p>
</li>
</ol>
<p>注意：in、out、inout 都可以在一个存储过程中带多个</p>
<h3 id="创建存储过程">创建存储过程</h3>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="err">存储过程名</span><span class="p">(</span><span class="k">in</span><span class="o">|</span><span class="k">out</span><span class="o">|</span><span class="k">inout</span><span class="w"> </span><span class="err">参数名</span><span class="w">  </span><span class="err">参数类型</span><span class="p">,...)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">begin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">存储过程体</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">end</span><span class="w">
</span></span></span></code></pre></div><p>类似于方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">修饰符</span> <span class="n">返回类型</span> <span class="nf">方法名</span><span class="o">(</span><span class="n">参数类型</span> <span class="n">参数名</span><span class="o">,...){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">方法体</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>注意</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 需要设置新的结束标记
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">delimiter</span><span class="w"> </span><span class="err">新的结束标记</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 示例：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">delimiter</span><span class="w"> </span><span class="err">$</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="err">存储过程名</span><span class="p">(</span><span class="k">IN</span><span class="o">|</span><span class="k">OUT</span><span class="o">|</span><span class="k">INOUT</span><span class="w"> </span><span class="err">参数名</span><span class="w">  </span><span class="err">参数类型</span><span class="p">,...)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">BEGIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">sql语句1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">sql语句2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">END</span><span class="w"> </span><span class="err">$</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 存储过程体中可以有多条sql语句，如果仅仅一条sql语句，则可以省略begin end
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 参数前面的符号的意思
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">in</span><span class="p">:</span><span class="err">该参数只能作为输入</span><span class="w"> </span><span class="err">（该参数不能做返回值）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">out</span><span class="err">：该参数只能作为输出（该参数只能做返回值）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">inout</span><span class="err">：既能做输入又能做输出</span><span class="w">
</span></span></span></code></pre></div><h3 id="调用存储过程">调用存储过程</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">call</span><span class="w"> </span><span class="err">存储过程名</span><span class="p">(</span><span class="err">实参列表</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><h2 id="函数">函数</h2>
<h3 id="创建函数">创建函数</h3>
<p>学过的函数：LENGTH、SUBSTR、CONCAT 等
语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="n">FUNCTION</span><span class="w"> </span><span class="err">函数名</span><span class="p">(</span><span class="err">参数名</span><span class="w"> </span><span class="err">参数类型</span><span class="p">,...)</span><span class="w"> </span><span class="n">RETURNS</span><span class="w"> </span><span class="err">返回类型</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">BEGIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">函数体</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">END</span><span class="w">
</span></span></span></code></pre></div><h3 id="调用函数">调用函数</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="err">函数名（实参列表）</span><span class="w">
</span></span></span></code></pre></div><h3 id="函数和存储过程的区别">函数和存储过程的区别</h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">关键字</th>
<th style="text-align:center">调用语法</th>
<th>返回值</th>
<th style="text-align:center">应用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">函数</td>
<td style="text-align:center">FUNCTION</td>
<td style="text-align:center">SELECT</td>
<td>函数() 只能是一个</td>
<td style="text-align:center">一般用于查询结果为一个值并返回时，当有返回值而且仅仅一个</td>
</tr>
<tr>
<td style="text-align:center">存储过程</td>
<td style="text-align:center">PROCEDURE</td>
<td style="text-align:center">CALL</td>
<td>存储过程() 可以有 0 个或多个</td>
<td style="text-align:center">一般用于更新</td>
</tr>
</tbody>
</table></div>
<h2 id="流程控制结构">流程控制结构</h2>
<h3 id="系统变量">系统变量</h3>
<p>一、全局变量</p>
<p>作用域：针对于所有会话（连接）有效，但不能跨重启</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 查看所有全局变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">GLOBAL</span><span class="w"> </span><span class="n">VARIABLES</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看满足条件的部分系统变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">GLOBAL</span><span class="w"> </span><span class="n">VARIABLES</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%char%&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看指定的系统变量的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">@@</span><span class="n">global</span><span class="p">.</span><span class="n">autocommit</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 为某个系统变量赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">SET</span><span class="w"> </span><span class="o">@@</span><span class="n">global</span><span class="p">.</span><span class="n">autocommit</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="n">GLOBAL</span><span class="w"> </span><span class="n">autocommit</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>二、会话变量</p>
<p>作用域：针对于当前会话（连接）有效</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 查看所有会话变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">SESSION</span><span class="w"> </span><span class="n">VARIABLES</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看满足条件的部分会话变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">SESSION</span><span class="w"> </span><span class="n">VARIABLES</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%char%&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 查看指定的会话变量的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">@@</span><span class="n">autocommit</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">@@</span><span class="n">session</span><span class="p">.</span><span class="n">tx_isolation</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 为某个会话变量赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">SET</span><span class="w"> </span><span class="o">@@</span><span class="n">session</span><span class="p">.</span><span class="n">tx_isolation</span><span class="o">=</span><span class="s1">&#39;read-uncommitted&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="n">SESSION</span><span class="w"> </span><span class="n">tx_isolation</span><span class="o">=</span><span class="s1">&#39;read-committed&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h3 id="自定义变量">自定义变量</h3>
<p>一、用户变量</p>
<p>声明并初始化：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="kt">SET</span><span class="w"> </span><span class="o">@</span><span class="err">变量名</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="o">@</span><span class="err">变量名</span><span class="p">:</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">@</span><span class="err">变量名</span><span class="p">:</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>赋值：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="err">方式一：一般用于赋简单的值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="err">变量名</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="err">变量名</span><span class="p">:</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="err">变量名</span><span class="p">:</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">方式二：一般用于赋表</span><span class="w"> </span><span class="err">中的字段值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="err">字段名或表达式</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="err">变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="err">表</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>使用：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">@</span><span class="err">变量名</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>二、局部变量</p>
<p>声明：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">declare</span><span class="w"> </span><span class="err">变量名</span><span class="w"> </span><span class="err">类型</span><span class="w"> </span><span class="p">[</span><span class="k">default</span><span class="w"> </span><span class="err">值</span><span class="p">];</span><span class="w">
</span></span></span></code></pre></div><p>赋值：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="err">方式一：一般用于赋简单的值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="err">变量名</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kt">SET</span><span class="w"> </span><span class="err">变量名</span><span class="p">:</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="err">变量名</span><span class="p">:</span><span class="o">=</span><span class="err">值</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">方式二：一般用于赋表</span><span class="w"> </span><span class="err">中的字段值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="err">字段名或表达式</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="err">变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="err">表</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>使用：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="err">变量名</span><span class="w">
</span></span></span></code></pre></div><p><strong>二者的区别：</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th></th>
<th>作用域</th>
<th>定义位置</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>用户变量</td>
<td>当前会话</td>
<td>会话的任何地方</td>
<td>加@符号，不用指定类型</td>
</tr>
<tr>
<td>局部变量</td>
<td>定义它的 BEGIN END 中</td>
<td>BEGIN END 的第一句话</td>
<td>一般不用加@,需要指定类型</td>
</tr>
</tbody>
</table></div>
<h3 id="分支">分支</h3>
<p>一、if 函数</p>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">if</span><span class="p">(</span><span class="err">条件</span><span class="p">,</span><span class="err">值</span><span class="mi">1</span><span class="p">,</span><span class="err">值</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>特点：可以用在任何位置</p>
<p>二、case 语句</p>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 情况一：类似于switch
</span></span></span><span class="line"><span class="cl"><span class="c1"># (如果是语句，需要加分号)
</span></span></span><span class="line"><span class="cl"><span class="c1"># （如果是放在begin end中需要加上case，如果放在select后面不需要）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">case</span><span class="w"> </span><span class="err">表达式</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">when</span><span class="w"> </span><span class="err">值</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">结果</span><span class="mi">1</span><span class="err">或语句</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">when</span><span class="w"> </span><span class="err">值</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">结果</span><span class="mi">2</span><span class="err">或语句</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">else</span><span class="w"> </span><span class="err">结果</span><span class="n">n或语句n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">end</span><span class="w"> </span><span class="p">[</span><span class="k">case</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 情况二：类似于多重if
</span></span></span><span class="line"><span class="cl"><span class="c1"># (如果是语句，需要加分号)
</span></span></span><span class="line"><span class="cl"><span class="c1"># （如果是放在begin end中需要加上case，如果放在select后面不需要）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">case</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">when</span><span class="w"> </span><span class="err">条件</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">结果</span><span class="mi">1</span><span class="err">或语句</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">when</span><span class="w"> </span><span class="err">条件</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">结果</span><span class="mi">2</span><span class="err">或语句</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">else</span><span class="w"> </span><span class="err">结果</span><span class="n">n或语句n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">end</span><span class="w"> </span><span class="p">[</span><span class="k">case</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>特点：可以用在任何位置</p>
<p>三、if elseif 语句</p>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">if</span><span class="w"> </span><span class="err">情况</span><span class="mi">1</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">语句</span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">elseif</span><span class="w"> </span><span class="err">情况</span><span class="mi">2</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="err">语句</span><span class="mi">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">else</span><span class="w"> </span><span class="err">语句</span><span class="n">n</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">end</span><span class="w"> </span><span class="k">if</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>特点：只能用在 begin end 中！</p>
<p><strong>三者比较：</strong></p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th></th>
<th>应用场合</th>
</tr>
</thead>
<tbody>
<tr>
<td>if 函数</td>
<td>简单双分支</td>
</tr>
<tr>
<td>case 结构</td>
<td>等值判断 的多分支</td>
</tr>
<tr>
<td>if 结构</td>
<td>区间判断 的多分支</td>
</tr>
</tbody>
</table></div>
<h3 id="循环">循环</h3>
<p>语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="p">[</span><span class="err">标签：</span><span class="p">]</span><span class="w"> </span><span class="k">WHILE</span><span class="w"> </span><span class="err">循环条件</span><span class="w"> </span><span class="n">DO</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">循环体</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">END</span><span class="w"> </span><span class="k">WHILE</span><span class="w"> </span><span class="p">[</span><span class="err">标签</span><span class="p">];</span><span class="w">
</span></span></span></code></pre></div><p>特点：</p>
<ol>
<li>
<p>只能放在 BEGIN END 里面</p>
</li>
<li>
<p>如果要搭配 leave 跳转语句，需要使用标签，否则可以不用标签</p>
</li>
<li>
<p>leave 类似于 java 中的 break 语句，跳出所在循环！！！</p>
</li>
</ol>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            
            
            <a href="/tags/mysql/">MySQL</a>
        
            
            
            <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-ND 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2021 - 
        
        2022 Tian Jiale&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.13.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#数据库的好处">数据库的好处</a></li>
    <li><a href="#数据库相关概念">数据库相关概念</a></li>
    <li><a href="#数据库存储数据的特点">数据库存储数据的特点</a></li>
    <li><a href="#mysql-产品的介绍和安装">MySQL 产品的介绍和安装</a>
      <ol>
        <li><a href="#mysql-服务的启动和停止">MySQL 服务的启动和停止</a></li>
        <li><a href="#mysql-服务的登录和退出">MySQL 服务的登录和退出</a></li>
        <li><a href="#mysql-的常见命令">MySQL 的常见命令</a></li>
        <li><a href="#mysql-的语法规范">MySQL 的语法规范</a></li>
        <li><a href="#sql-的语言分类">SQL 的语言分类</a></li>
        <li><a href="#sql-的常见命令">SQL 的常见命令</a></li>
      </ol>
    </li>
    <li><a href="#dql-语句">DQL 语句</a>
      <ol>
        <li><a href="#进阶-1基础查询">进阶 1：基础查询</a></li>
        <li><a href="#进阶-2条件查询">进阶 2：条件查询</a></li>
        <li><a href="#进阶-3排序查询">进阶 3：排序查询</a></li>
        <li><a href="#进阶-4常见函数">进阶 4：常见函数</a></li>
        <li><a href="#进阶-5分组查询">进阶 5：分组查询</a></li>
        <li><a href="#进阶-6多表连接查询">进阶 6：多表连接查询</a></li>
        <li><a href="#进阶-7子查询">进阶 7：子查询</a></li>
        <li><a href="#进阶-8分页查询">进阶 8：分页查询</a></li>
        <li><a href="#进阶-9联合查询">进阶 9：联合查询</a></li>
      </ol>
    </li>
    <li><a href="#dml-语句">DML 语句</a>
      <ol>
        <li><a href="#插入">插入</a></li>
        <li><a href="#修改">修改</a></li>
        <li><a href="#删除">删除</a></li>
      </ol>
    </li>
    <li><a href="#ddl-语句">DDL 语句</a>
      <ol>
        <li><a href="#库和表的管理">库和表的管理</a></li>
        <li><a href="#常见类型">常见类型</a></li>
        <li><a href="#常见约束">常见约束</a></li>
        <li><a href="#标识列">标识列</a></li>
      </ol>
    </li>
    <li><a href="#事务">事务</a>
      <ol>
        <li><a href="#特点">特点</a></li>
        <li><a href="#事务的分类">事务的分类</a></li>
        <li><a href="#事务的隔离级别">事务的隔离级别</a></li>
      </ol>
    </li>
    <li><a href="#视图">视图</a>
      <ol>
        <li><a href="#视图的创建">视图的创建</a></li>
        <li><a href="#视图的更新">视图的更新</a></li>
        <li><a href="#视图的删除">视图的删除</a></li>
        <li><a href="#视图结构的查看">视图结构的查看</a></li>
        <li><a href="#视图数据的增删改查">视图数据的增删改查</a></li>
        <li><a href="#某些视图不能更新">某些视图不能更新</a></li>
      </ol>
    </li>
    <li><a href="#存储">存储</a>
      <ol>
        <li><a href="#创建存储过程">创建存储过程</a></li>
        <li><a href="#调用存储过程">调用存储过程</a></li>
      </ol>
    </li>
    <li><a href="#函数">函数</a>
      <ol>
        <li><a href="#创建函数">创建函数</a></li>
        <li><a href="#调用函数">调用函数</a></li>
        <li><a href="#函数和存储过程的区别">函数和存储过程的区别</a></li>
      </ol>
    </li>
    <li><a href="#流程控制结构">流程控制结构</a>
      <ol>
        <li><a href="#系统变量">系统变量</a></li>
        <li><a href="#自定义变量">自定义变量</a></li>
        <li><a href="#分支">分支</a></li>
        <li><a href="#循环">循环</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<script type="text/javascript">
    console.log("%c aecra %c Leave a dialogue for the years to come！ ","color: #fff; margin: 1em 0; padding: 5px 0; background: #3498db;","margin: 1em 0; padding: 5px 0; background: #efefef;");
</script>
<script>
    
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?63f15ba6b5eafecd5a7d2290491d47ce";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    </body>
</html>
