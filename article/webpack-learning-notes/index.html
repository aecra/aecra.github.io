<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='webpack æ˜¯å‰ç«¯å¼€å‘ä¸èƒ½é¿å¼€çš„ç®¡ç†å·¥å…·ï¼Œæœ¬æ–‡æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹ webpack å¦‚ä½•ä½¿ç”¨çš„ç¬”è®°ï¼Œåæ§½è§æ–‡æœ« :)'><meta name='keywords' content='node'><title>webpack å­¦ä¹ ç¬”è®°</title>



<link rel='canonical' href='https://aecra.ml/article/webpack-learning-notes/'>

<link rel="stylesheet" href="/scss/style.min.49efbd60809f94209900a2125634493930b2a299cd430d619fc24c3ad2c77d28.css"><meta property='og:title' content='webpack å­¦ä¹ ç¬”è®°'>
<meta property='og:description' content='webpack æ˜¯å‰ç«¯å¼€å‘ä¸èƒ½é¿å¼€çš„ç®¡ç†å·¥å…·ï¼Œæœ¬æ–‡æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹ webpack å¦‚ä½•ä½¿ç”¨çš„ç¬”è®°ï¼Œåæ§½è§æ–‡æœ« :)'>


<meta property='og:url' content='https://aecra.ml/article/webpack-learning-notes/'>
<meta property='og:site_name' content='Tian Jiale&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='node' /><meta property='article:published_time' content='2021-03-27T22:55:10&#43;00:00'/><meta property='article:modified_time' content='2021-03-27T22:55:10&#43;00:00'/><meta property='og:image' content='https://static.aecra.ml/cover/webpack-learning-notes.jpg' />
<meta name="twitter:title" content="webpack å­¦ä¹ ç¬”è®°">
<meta name="twitter:description" content="webpack æ˜¯å‰ç«¯å¼€å‘ä¸èƒ½é¿å¼€çš„ç®¡ç†å·¥å…·ï¼Œæœ¬æ–‡æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹ webpack å¦‚ä½•ä½¿ç”¨çš„ç¬”è®°ï¼Œåæ§½è§æ–‡æœ« :)"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://static.aecra.ml/cover/webpack-learning-notes.jpg' />
    <link rel="shortcut icon" href="https://static.aecra.cn/logo.png" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-V4ML7JFB21"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-V4ML7JFB21', { 'anonymize_ip': false });
}
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended">
    <aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="https://static.aecra.cn/avatar.png" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">ğŸ˜Š</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Tian Jiale&#39;s Blog</a></h1>
            <h2 class="site-description">Leave a line of dialogue for the years to come.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/aecra'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³ äº</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’ æ¡£</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœ ç´¢</span>
            </a>
        </li>
        
        

        <li >
            <a href='/link/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹ é“¾</span>
            </a>
        </li>
        
        

        <li >
            <a href='/index.xml' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                
                <span>RSS</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://aecra.ml/" selected>ä¸­æ–‡</option>
                        
                            <option value="https://aecra.ml/en/" >English</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš— è‰²</span>
                </li>
            
        </div>
    </ol>
</aside>

<main class="main full-width">
    <article class="main-article">
    <header class="article-header">
        <div class="article-image">
            
            
            <a href="/article/webpack-learning-notes/">
                
                    <img src="https://static.aecra.ml/cover/webpack-learning-notes.jpg" loading="lazy" alt="Featured image of post webpack å­¦ä¹ ç¬”è®°" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/article/webpack-learning-notes/">webpack å­¦ä¹ ç¬”è®°</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            webpack æ˜¯å‰ç«¯å¼€å‘ä¸èƒ½é¿å¼€çš„ç®¡ç†å·¥å…·ï¼Œæœ¬æ–‡æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹ webpack å¦‚ä½•ä½¿ç”¨çš„ç¬”è®°ï¼Œåæ§½è§æ–‡æœ« :)
        </h3>
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 27, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 17 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <h2 id="webpack-ç®€ä»‹">webpack ç®€ä»‹</h2>
<h3 id="webpack-æ˜¯ä»€ä¹ˆ">webpack æ˜¯ä»€ä¹ˆ</h3>
<p><a class="link" href="https://webpack.docschina.org/"  target="_blank" rel="noopener"
    >webpack</a> æ˜¯ä¸€ç§å‰ç«¯èµ„æºæ„å»ºå·¥å…·ï¼Œä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚ åœ¨ webpack çœ‹æ¥, å‰ç«¯çš„æ‰€æœ‰èµ„æºæ–‡ä»¶(js/json/css/img/less/&hellip;)éƒ½ä¼šä½œä¸ºæ¨¡å—å¤„ç†ã€‚ å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œé™æ€åˆ†æï¼Œæ‰“åŒ…ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æº(bundle)ã€‚</p>
<h3 id="webpack-äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ">webpack äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h3>
<p>Entry</p>
<p>å…¥å£(Entry)æŒ‡ç¤º webpack ä»¥å“ªä¸ªæ–‡ä»¶ä¸ºå…¥å£èµ·ç‚¹å¼€å§‹æ‰“åŒ…ï¼Œåˆ†ææ„å»ºå†…éƒ¨ä¾èµ–å›¾ã€‚</p>
<p>Output</p>
<p>è¾“å‡º(Output)æŒ‡ç¤º webpack æ‰“åŒ…åçš„èµ„æº budles è¾“å‡ºåˆ°å“ªé‡Œå»ï¼Œä»¥åŠå¦‚ä½•å‘½åã€‚</p>
<p>Loader</p>
<p>Loader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶(webpack è‡ªèº«åªç†è§£ JavaScript)ã€‚</p>
<p>Plugins</p>
<p>æ’ä»¶(Plugins)å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œ ä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ç­‰ã€‚</p>
<p>Mode</p>
<p>æ¨¡å¼(Mode)æŒ‡ç¤º webpack ä½¿ç”¨ç›¸åº”æ¨¡å¼çš„é…ç½®ã€‚</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>æè¿°</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>development</td>
<td>ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½® ä¸º developmentã€‚å¯ç”¨ NamedChunksPlugin å’Œ NamedModulesPluginã€‚</td>
<td>èƒ½è®©ä»£ç æœ¬åœ°è°ƒè¯• è¿è¡Œçš„ç¯å¢ƒ</td>
</tr>
<tr>
<td>production</td>
<td>ä¼šå°† DefinePlugin ä¸­ process.env.NODE_ENV çš„å€¼è®¾ç½® ä¸º productionã€‚å¯ç”¨ FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin å’Œ TerserPlugin</td>
<td>èƒ½è®©ä»£ç ä¼˜åŒ–ä¸Šçº¿ è¿è¡Œçš„ç¯å¢ƒ</td>
</tr>
</tbody>
</table></div>
<h2 id="webpack-çš„ç®€æ˜“ä½¿ç”¨">webpack çš„ç®€æ˜“ä½¿ç”¨</h2>
<h3 id="åˆå§‹åŒ–é…ç½®">åˆå§‹åŒ–é…ç½®</h3>
<ol>
<li>
<p>åˆå§‹åŒ– <code>package.json</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm init
</span></span></code></pre></div></li>
<li>
<p>ä¸‹è½½å¹¶å®‰è£… <code>webpack</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">// å…¨å±€å®‰è£…
</span></span><span class="line"><span class="cl">npm install webpack webpack-cli -g
</span></span><span class="line"><span class="cl">// å®‰è£…åˆ°å¼€å‘ç¯å¢ƒ
</span></span><span class="line"><span class="cl">npm install webpack webpack-cli -D
</span></span></code></pre></div></li>
</ol>
<h3 id="ç¼–è¯‘æ‰“åŒ…åº”ç”¨">ç¼–è¯‘æ‰“åŒ…åº”ç”¨</h3>
<ol>
<li>
<p>åˆ›å»ºæ–‡ä»¶</p>
</li>
<li>
<p>è¿è¡ŒæŒ‡ä»¤</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">// å¼€å‘ç¯å¢ƒ
</span></span><span class="line"><span class="cl">webpack src/js/index.js -o build/js/built.js --mode<span class="o">=</span>development
</span></span></code></pre></div><p>åŠŸèƒ½ï¼šwebpack èƒ½å¤Ÿç¼–è¯‘æ‰“åŒ… js å’Œ json æ–‡ä»¶ï¼Œå¹¶ä¸”èƒ½å°† es6 çš„æ¨¡å—åŒ–è¯­æ³•è½¬æ¢æˆ æµè§ˆå™¨èƒ½è¯†åˆ«çš„è¯­æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">// ç”Ÿäº§ç¯å¢ƒ
</span></span><span class="line"><span class="cl">webpack src/js/index.js -o build/js/built.js --mode<span class="o">=</span>production
</span></span></code></pre></div><p>åŠŸèƒ½ï¼šåœ¨å¼€å‘é…ç½®åŠŸèƒ½ä¸Šå¤šä¸€ä¸ªåŠŸèƒ½ï¼Œå‹ç¼©ä»£ç ã€‚</p>
</li>
<li>
<p>æ•ˆæœ</p>
<p>webpack èƒ½å¤Ÿç¼–è¯‘æ‰“åŒ… js å’Œ json æ–‡ä»¶ã€‚ èƒ½å°† es6 çš„æ¨¡å—åŒ–è¯­æ³•è½¬æ¢æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„è¯­æ³•ã€‚ èƒ½å‹ç¼©ä»£ç ã€‚</p>
</li>
<li>
<p>é—®é¢˜</p>
<p>ä¸èƒ½ç¼–è¯‘æ‰“åŒ… cssã€img ç­‰æ–‡ä»¶ã€‚ ä¸èƒ½å°† js çš„ es6 åŸºæœ¬è¯­æ³•è½¬åŒ–ä¸º es5 ä»¥ä¸‹è¯­æ³•ã€‚</p>
</li>
</ol>
<h2 id="webpack-å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®">webpack å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®</h2>
<h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶">åˆ›å»ºé…ç½®æ–‡ä»¶</h3>
<ol>
<li>
<p>åˆ›å»ºæ–‡ä»¶ webpack.config.js</p>
</li>
<li>
<p>é…ç½®å†…å®¹å¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// resolveç”¨æ¥æ‹¼æ¥ç»å¯¹è·¯å¾„çš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å…¥å£èµ·ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è¾“å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¾“å‡ºæ–‡ä»¶å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;built.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¾“å‡ºè·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span> <span class="c1">// å¼€å‘æ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// mode: &#39;production&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></div></li>
<li>
<p>è¿è¡ŒæŒ‡ä»¤: <code>webpack</code></p>
</li>
</ol>
<h3 id="æ‰“åŒ…æ ·å¼èµ„æº">æ‰“åŒ…æ ·å¼èµ„æº</h3>
<ol>
<li>
<p>åˆ›å»º <code>less</code> æ–‡ä»¶</p>
</li>
<li>
<p>ä¸‹è½½å®‰è£… loader åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install css-loader style-loader less-loader --save-dev
</span></span></code></pre></div></li>
<li>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// resolveç”¨æ¥æ‹¼æ¥ç»å¯¹è·¯å¾„çš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å…¥å£èµ·ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è¾“å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¾“å‡ºæ–‡ä»¶å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;built.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¾“å‡ºè·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// __dirname nodejsçš„å˜é‡ï¼Œä»£è¡¨å½“å‰æ–‡ä»¶çš„ç›®å½•ç»å¯¹è·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// loaderçš„é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// è¯¦ç»†loaderé…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// ä¸åŒæ–‡ä»¶å¿…é¡»é…ç½®ä¸åŒloaderå¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// åŒ¹é…å“ªäº›æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ä½¿ç”¨å“ªäº›loaderè¿›è¡Œå¤„ç†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// useæ•°ç»„ä¸­loaderæ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š ä¾æ¬¡æ‰§è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">// åˆ›å»ºstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºæ’å…¥è¿›è¡Œï¼Œæ·»åŠ åˆ°headä¸­ç”Ÿæ•ˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// å°†cssæ–‡ä»¶å˜æˆcommonjsæ¨¡å—åŠ è½½jsä¸­ï¼Œé‡Œé¢å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.less$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// å°†lessæ–‡ä»¶ç¼–è¯‘æˆcssæ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="c1">// éœ€è¦ä¸‹è½½ less-loaderå’Œless
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="s1">&#39;less-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// pluginsçš„é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¯¦ç»†pluginsçš„é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span> <span class="c1">// å¼€å‘æ¨¡å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// mode: &#39;production&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></div></li>
<li>
<p>è¿è¡ŒæŒ‡ä»¤: <code>webpack</code></p>
</li>
</ol>
<h3 id="æ‰“åŒ…-html-èµ„æº">æ‰“åŒ… HTML èµ„æº</h3>
<ol>
<li>
<p>åˆ›å»º HTML æ–‡ä»¶</p>
</li>
<li>
<p>ä¸‹è½½å®‰è£… plugin åŒ…</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install --save-dev html-webpack-plugin
</span></span></code></pre></div></li>
<li>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œhtml-webpack-plugin çš„è¯¦ç»†é…ç½®è§ <a class="link" href="https://github.com/jantimon/html-webpack-plugin"  target="_blank" rel="noopener"
    >Github</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;built.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// loaderçš„é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// pluginsçš„é…ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// html-webpack-plugin
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// åŠŸèƒ½ï¼šé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„HTMLï¼Œè‡ªåŠ¨å¼•å…¥æ‰“åŒ…è¾“å‡ºçš„æ‰€æœ‰èµ„æºï¼ˆJS/CSSï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// éœ€æ±‚ï¼šéœ€è¦æœ‰ç»“æ„çš„HTMLæ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å¤åˆ¶ &#39;./src/index.html&#39; æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å¼•å…¥æ‰“åŒ…è¾“å‡ºçš„æ‰€æœ‰èµ„æºï¼ˆJS/CSSï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/index.html&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div></li>
<li>
<p>è¿è¡ŒæŒ‡ä»¤: <code>webpack</code></p>
</li>
</ol>
<h3 id="æ‰“åŒ…å›¾ç‰‡èµ„æº">æ‰“åŒ…å›¾ç‰‡èµ„æº</h3>
<ol>
<li>
<p>åˆ›å»ºå›¾ç‰‡æ–‡ä»¶</p>
</li>
<li>
<p>ä¸‹è½½å®‰è£… loader åŒ…ï¼Œåœ¨ webpack5 ä¸­ï¼Œå¢åŠ äº†<a class="link" href="https://webpack.docschina.org/guides/asset-modules/"  target="_blank" rel="noopener"
    >èµ„æºæ¨¡å—</a>ç”¨æ¥å¤„ç†èµ„æºæ–‡ä»¶è€Œæ— éœ€åŠ è½½ loaderï¼Œä¸‹è½½çš„ html-loader åªæ˜¯å°†å›¾ç‰‡ require åˆ° js ç›®å½•ä»¥è¿›è¡Œæ‰“åŒ…ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install --save-dev html-loader
</span></span></code></pre></div></li>
<li>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;built.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// css-loader ä¼šå¯¹ @import å’Œ url() è¿›è¡Œå¤„ç†ï¼ˆå¯¼å…¥ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.less$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;less-loader&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å°†HTMLä¸­çš„å¯åŠ è½½å±æ€§å¯¼å…¥åˆ°jsè¿›è¡Œæ‰“åŒ…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.html$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;html-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å¤„ç†importçš„å›¾ç‰‡è·¯å¾„é—®é¢˜ï¼Œå®é™…ä¸Šä½¿ç”¨ Asset Modules å¯ä»¥æ¥æ”¶å¹¶åŠ è½½ä»»ä½•æ–‡ä»¶ï¼Œç„¶åå°†å…¶è¾“å‡ºåˆ°æ„å»ºç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.(png|svg|jpg|jpeg|gif)$/i</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;asset&#39;</span><span class="p">,</span> <span class="c1">// è‡ªåŠ¨åœ°åœ¨ resource å’Œ inline ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼šå°äº 8kb çš„æ–‡ä»¶ï¼Œå°†ä¼šè§†ä¸º inline æ¨¡å—ç±»å‹ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸º resource æ¨¡å—ç±»å‹ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">parser</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">dataUrlCondition</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">maxSize</span><span class="o">:</span> <span class="mi">8</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="c1">// 8kb æ˜¯é»˜è®¤å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/index.html&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div></li>
</ol>
<h3 id="æ‰“åŒ…å…¶ä»–èµ„æº">æ‰“åŒ…å…¶ä»–èµ„æº</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">HtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;html-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;built.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// æ‰“åŒ…å…¶ä»–èµ„æº(é™¤äº†html/js/cssèµ„æºä»¥å¤–çš„èµ„æº)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// æ’é™¤css/js/htmlèµ„æº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">exclude</span><span class="o">:</span> <span class="sr">/\.(css|js|html|less)$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;asset&#39;</span><span class="p">,</span> <span class="c1">// è‡ªåŠ¨åœ°åœ¨ resource å’Œ inline ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼šå°äº 8kb çš„æ–‡ä»¶ï¼Œå°†ä¼šè§†ä¸º inline æ¨¡å—ç±»å‹ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸º resource æ¨¡å—ç±»å‹ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">parser</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">dataUrlCondition</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">maxSize</span><span class="o">:</span> <span class="mi">8</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="c1">// 8kb æ˜¯é»˜è®¤å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>          <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/index.html&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h3 id="source-map">source map</h3>
<p>å½“ webpack æ‰“åŒ…æºä»£ç æ—¶ï¼Œå¯èƒ½ä¼šå¾ˆéš¾è¿½è¸ªåˆ° error(é”™è¯¯) å’Œ warning(è­¦å‘Š) åœ¨æºä»£ç ä¸­çš„åŸå§‹ä½ç½®ã€‚å¯ä»¥é€šè¿‡ä¸€å®šè®¾ç½®æ¥è¿½è¸ªé”™è¯¯æ–‡ä»¶ã€‚åœ¨é…ç½®ä¸­åŠ å…¥å¦‚ä¸‹å±æ€§ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
</span></span></code></pre></div><h3 id="å¼€å‘å·¥å…·">å¼€å‘å·¥å…·</h3>
<p>åœ¨æ¯æ¬¡ç¼–è¯‘ä»£ç æ—¶ï¼Œæ‰‹åŠ¨è¿è¡Œ <code>npm run build</code> ä¼šæ˜¾å¾—å¾ˆéº»çƒ¦ã€‚webpack æä¾›å‡ ç§å¯é€‰æ–¹å¼ï¼Œå¸®åŠ©ä½ åœ¨ä»£ç å‘ç”Ÿå˜åŒ–åè‡ªåŠ¨ç¼–è¯‘ä»£ç ï¼š</p>
<ol>
<li>webpack&rsquo;s <a class="link" href="https://webpack.docschina.org/configuration/watch/#watch"  target="_blank" rel="noopener"
    >Watch Mode</a></li>
<li><a class="link" href="https://github.com/webpack/webpack-dev-server"  target="_blank" rel="noopener"
    >webpack-dev-server</a></li>
<li><a class="link" href="https://github.com/webpack/webpack-dev-middleware"  target="_blank" rel="noopener"
    >webpack-dev-middleware</a></li>
</ol>
<p>ä½†ä¸€èˆ¬ä½¿ç”¨ webpack-dev-serverï¼Œå…¶å…·æœ‰ live reloading(å®æ—¶é‡æ–°åŠ è½½) åŠŸèƒ½ï¼Œwebpack-dev-middleware æ˜¯ webpack-dev-server çš„ä¸­é—´ä»¶ã€‚é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// é¡¹ç›®æ„å»ºåè·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">contentBase</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å¯åŠ¨gzipå‹ç¼©
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">compress</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç«¯å£å·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">port</span><span class="o">:</span> <span class="mi">3000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¿è¡Œåº”ä½¿ç”¨<code>webpack serve</code> è€Œä¸æ˜¯ <code>webpack-dev-server</code>ï¼Œè§<a class="link" href="https://github.com/webpack/webpack-dev-server/issues/2759"  target="_blank" rel="noopener"
    >issues</a>ã€‚</p>
<p>è‹¥è¦æ›´æ”¹ä»£ç æ—¶æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°å¯åšå¦‚ä¸‹è®¾ç½®ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;web&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="webpack-ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®">webpack ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®</h2>
<blockquote>
<p>ç”Ÿäº§ç¯å¢ƒä¸‹é»˜è®¤ä½¿ç”¨ <a class="link" href="https://webpack.docschina.org/plugins/terser-webpack-plugin"  target="_blank" rel="noopener"
    ><code>TerserPlugin</code></a></p>
</blockquote>
<h3 id="å¯ç”¨-source-map">å¯ç”¨ source map</h3>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ source mapï¼Œå› ä¸ºå®ƒä»¬å¯¹ debug(è°ƒè¯•æºç ) å’Œè¿è¡Œ benchmark tests(åŸºå‡†æµ‹è¯•) å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;eval-source-map&#39;</span><span class="p">,</span>
</span></span></code></pre></div><h3 id="æå–æ‰€æœ‰çš„-css-åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­">æå–æ‰€æœ‰çš„ CSS åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</h3>
<p>ä½¿ç”¨æ’ä»¶ mini-css-extract-pluginï¼ŒåŒæ—¶å°† Loader <code>style-loader</code> æ¢æˆ <code>MiniCssExtractPlugin.loader</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MiniCssExtractPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;mini-css-extract-plugin&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// &#34;style-loader&#34;æ¢æˆå¦‚ä¸‹é…ç½®ï¼Œå…¶ä¸­publicPathä¸ºå½“å‰æ–‡ä»¶å¤„ç†åçš„å…¬å…±è·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loader</span><span class="o">:</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">.</span><span class="nx">loader</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">publicPath</span><span class="o">:</span> <span class="s2">&#34;../&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å¢åŠ  mini-css-extract-plugin æ’ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">MiniCssExtractPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].css&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span>
</span></span></code></pre></div><h3 id="css-å…¼å®¹æ€§å¤„ç†">css å…¼å®¹æ€§å¤„ç†</h3>
<p>ä½¿ç”¨ postcss-loader å’Œ postcss-preset-env ä¸¤ä¸ª loaderã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install --save-dev postcss-loader postcss postcss-preset-env
</span></span></code></pre></div><p>åˆ›å»ºé…ç½®æ–‡ä»¶ <strong>postcss.config.js</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;postcss-preset-env&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// å…¶ä»–é€‰é¡¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p><strong>webpack.config.js</strong> ä¸­æ·»åŠ  <code>postcss-loader</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/i</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">use</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;style-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span> <span class="s1">&#39;postcss-loader&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>åœ¨ package.json ä¸­å¢åŠ å¦‚ä¸‹é…ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;browserslist&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;&gt; 1%&#34;</span><span class="p">,</span> <span class="s2">&#34;not dead&#34;</span><span class="p">,</span> <span class="s2">&#34;not op_mini all&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="å‹ç¼©-css">å‹ç¼© css</h3>
<p>ä½¿ç”¨æ’ä»¶ <a class="link" href="https://webpack.docschina.org/plugins/css-minimizer-webpack-plugin/"  target="_blank" rel="noopener"
    >CssMinimizerWebpackPlugin</a>ï¼Œå®‰è£…ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install css-minimizer-webpack-plugin --save-dev
</span></span></code></pre></div><p>æ¥ç€åœ¨ <code>webpack</code> é…ç½®ä¸­åŠ å…¥è¯¥æ’ä»¶ï¼Œä¸æ­¤åŒæ—¶ html ä¹Ÿè¢«å‹ç¼©äº†ï¼ˆè²Œä¼¼æ˜¯é»˜è®¤å‹ç¼©ï¼Ÿï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">minimize</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">minimizer</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">CssMinimizerPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><h3 id="js-è¯­æ³•æ£€æŸ¥-eslint">js è¯­æ³•æ£€æŸ¥ Eslint</h3>
<p>ä¸ºäº†è§£å†³ eslint-loader çš„é—®é¢˜ï¼Œeslint-loader è¢«å¼ƒç”¨ï¼Œæ”¹ç”¨<a class="link" href="https://webpack.docschina.org/plugins/eslint-webpack-plugin/"  target="_blank" rel="noopener"
    >EslintWebpackPlugin</a>æ’ä»¶ã€‚</p>
<p>å®‰è£…ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install eslint-webpack-plugin --save-dev
</span></span><span class="line"><span class="cl">// éœ€è¦ç”¨åˆ° eslint
</span></span><span class="line"><span class="cl">npm install eslint --save-dev
</span></span></code></pre></div><p>ä½¿ç”¨ airbnb çš„ js è¯­æ³•æ£€æŸ¥è®¾ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install eslint-config-airbnb-base eslint-plugin-import --save-dev
</span></span></code></pre></div><p>åœ¨ package.json ä¸­æ·»åŠ é…ç½®</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;eslinkConfig&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;extends&#34;</span><span class="p">:</span> <span class="s2">&#34;airbnb-base&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><strong>æ³¨æ„</strong>ï¼šå¯èƒ½æœ‰éå¸¸å¤šçš„é”™è¯¯è­¦å‘Šï¼Œå»ºè®®æ­é… vs code æ’ä»¶ ESlint åšæ ¼å¼åŒ–ä½¿ç”¨ã€‚</p>
<p>è°ƒè¯•è¿‡ç¨‹ä¸­ä¼šæœ‰ console è¯­å¥ï¼Œå¯ä»¥åœ¨ console è¯­å¥å‰åŠ å…¥å¦‚ä¸‹æ³¨é‡Šç”¨æ¥å¿½ç•¥å¯¹ console çš„æ£€æŸ¥ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// eslint-disable-next-line no-console
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;no-console&#39;</span><span class="p">);</span>
</span></span></code></pre></div><h3 id="js-å…¼å®¹æ€§å¤„ç†">js å…¼å®¹æ€§å¤„ç†</h3>
<p>åœ¨ä¹‹å‰ä½¿ç”¨ @babel/polyfill æ¥å¤„ç† js å…¼å®¹æ€§é—®é¢˜ï¼Œä½† babel å®˜ç½‘æ˜¾ç¤ºå·²è¢«å¼ƒç”¨ï¼Œå»ºè®®ç›´æ¥ç”¨ <code>core-js/stable</code> å’Œ <code>regenerator-runtime/runtime</code> ï¼š</p>
<blockquote>
<p>ğŸš¨ As of Babel 7.4.0, this package has been deprecated in favor of directly including <code>core-js/stable</code> (to polyfill ECMAScript features) and <code>regenerator-runtime/runtime</code> (needed to use transpiled generator functions):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;core-js/stable&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;regenerator-runtime/runtime&#39;</span><span class="p">;</span>
</span></span></code></pre></div></blockquote>
<p><a class="link" href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#babelpolyfill"  target="_blank" rel="noopener"
    >å®‰è£…</a>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm i --save core-js regenerator-runtime
</span></span></code></pre></div><p>åœ¨ js ä¸­å¼•å…¥ <code>core-js/stable</code> å’Œ <code>regenerator-runtime/runtime</code> ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;core-js/stable&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s1">&#39;regenerator-runtime/runtime&#39;</span><span class="p">;</span>
</span></span></code></pre></div><p>æ‹“å±•</p>
<p><code>@babel/preset-env</code> å¯ä»¥åšåˆ°æŒ‰éœ€åŠ è½½ï¼Œå…·ä½“è§ <a class="link" href="https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md#babelpreset-env"  target="_blank" rel="noopener"
    >é“¾æ¥</a>ï¼Œæ²¡çœ‹æ˜ç™½æ€ä¹ˆç”¨ï¼Œæš‚æ—¶ä¸åšå­¦ä¹ ï¼ŒåŒæ—¶ webpack å®˜ç½‘å»ºè®® â€œä¸åŠ é€‰æ‹©åœ°å’ŒåŒæ­¥åœ°åŠ è½½æ‰€æœ‰ polyfill/shimï¼Œå°½ç®¡è¿™ä¼šå¯¼è‡´é¢å¤–çš„ bundle ä½“ç§¯æˆæœ¬ã€‚â€ï¼Œå› ä¸º pyolyfill è¢«å¼ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¸åŠ é€‰æ‹©åœ°åŠ è½½<code>core-js/stable</code> å’Œ <code>regenerator-runtime/runtime</code>ï¼Œå› ä¸ºæœ‰äº›æµè§ˆå™¨å¹¶æ²¡æœ‰å¾ˆå¥½åœ°æ”¯æŒ ECMAScript çš„æ–°ç‰¹æ€§ã€‚å–èˆé—®é¢˜å»ºè®®æŸ¥çœ‹ webpack å®˜ç½‘<a class="link" href="https://webpack.docschina.org/guides/shimming/#loading-polyfills"  target="_blank" rel="noopener"
    >æè¿°</a>ã€‚</p>
<h3 id="js-å‹ç¼©">js å‹ç¼©</h3>
<p>å®˜ç½‘æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ webpack v5 æˆ–ä»¥ä¸Šç‰ˆæœ¬ï¼Œä½ ä¸éœ€è¦å®‰è£…è¿™ä¸ªæ’ä»¶ã€‚webpack v5 è‡ªå¸¦æœ€æ–°çš„ <code>terser-webpack-plugin</code>ã€‚å¦‚æœä½¿ç”¨ webpack v4ï¼Œåˆ™å¿…é¡»å®‰è£… <code>terser-webpack-plugin</code> v4 çš„ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p>ç”Ÿäº§ç¯å¢ƒä¸‹è‡ªåŠ¨å‹ç¼©ï¼Œä½†é€šè¿‡ä»¥ä¸Šçš„é…ç½®æµç¨‹ä¹‹åï¼Œæˆ‘çš„ js å¹¶æ²¡æœ‰è¢«å‹ç¼©ï¼Œç”šè‡³è¿˜è¾¾åˆ°äº† 427kb çš„å¤§å°ï¼Œä»¥è‡³äºæŠ¥å‡ºé”™è¯¯è­¦å‘Šè¯´æ–‡ä»¶è¿‡å¤§ï¼ˆé™åˆ¶ 244kbï¼‰ï¼Œæ‰€ä»¥è‡ªè¡Œé…ç½®ã€‚</p>
<p>æ·»åŠ åˆ°å¼€å‘ä¾èµ–é¡¹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install terser-webpack-plugin --save-dev
</span></span></code></pre></div><p>é…ç½® <code>webpack.config.js</code> ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">TerserPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;terser-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">minimize</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">minimizer</span><span class="o">:</span> <span class="p">[</span><span class="k">new</span> <span class="nx">TerserPlugin</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½æå‡">æ€§èƒ½ä¼˜åŒ–/åŠŸèƒ½æå‡</h2>
<h3 id="æ¨¡å—çƒ­æ›¿æ¢hot-module-replacement">æ¨¡å—çƒ­æ›¿æ¢(hot module replacement)</h3>
<p>æ¨¡å—çƒ­æ›¿æ¢(HMR - hot module replacement)åŠŸèƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤ <a class="link" href="https://webpack.docschina.org/concepts/modules/"  target="_blank" rel="noopener"
    >æ¨¡å—</a>ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚æ›´å¤šä»‹ç»è§ <a class="link" href="https://webpack.docschina.org/concepts/hot-module-replacement/"  target="_blank" rel="noopener"
    >æ¨¡å—çƒ­æ›¿æ¢</a>ã€‚</p>
<p>è®¾ç½®æ–¹æ³•ï¼šåœ¨ [å¼€å‘å·¥å…·](### å¼€å‘å·¥å…·) ä¸­æ·»åŠ å¦‚ä¸‹è®¾ç½®ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">hot</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶ css å’Œ js éƒ½çƒ­æ›´æ–°äº†ï¼Œä½† html å¹¶æ²¡æœ‰çƒ­æ›´æ–°ï¼Œæ‰€ä»¥è¦ä¿®æ”¹ webpack é…ç½®ï¼Œåœ¨ entry å…¥å£ä¸­æ·»åŠ ä¸Š html æ–‡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./src/index.js&#39;</span><span class="p">,</span> <span class="s1">&#39;./src/index.html&#39;</span><span class="p">],</span>
</span></span></code></pre></div><p>ä½†æ˜¯ï¼Œæ²¡é‚£ä¹ˆç®€å•ï¼Œå•é¡µé¢çš„æµè¡Œä½¿å¾— html ä¸éœ€è¦æ›´æ”¹ï¼Œå› ä¸ºéƒ½æ˜¯ js ç”Ÿæˆçš„è™šæ‹Ÿ dom æ ‘å†æ·»åŠ åˆ°é¡µé¢ä¸­çš„ï¼Œè€Œä¸” html é¡µé¢çš„å˜åŒ–ä½¿å¾—æ‰€æœ‰å…¶ä»–çš„é¡µé¢éƒ½è¦å»å˜åŒ–ï¼Œè®¾ç½® html çƒ­åŠ è½½è¿˜ä¸å¦‚ä¸è®¾ç½®çƒ­åŠ è½½ã€‚</p>
<h3 id="ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒé…ç½®åˆ†ç¦»">ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒé…ç½®åˆ†ç¦»</h3>
<p><strong>development(å¼€å‘ç¯å¢ƒ)</strong> å’Œ <strong>production(ç”Ÿäº§ç¯å¢ƒ)</strong> è¿™ä¸¤ä¸ªç¯å¢ƒä¸‹çš„æ„å»ºç›®æ ‡å­˜åœ¨ç€å·¨å¤§å·®å¼‚ã€‚åœ¨<strong>å¼€å‘ç¯å¢ƒ</strong>ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ï¼šå¼ºå¤§çš„ source map å’Œä¸€ä¸ªæœ‰ç€ live reloading(å®æ—¶é‡æ–°åŠ è½½) æˆ– hot module replacement(çƒ­æ¨¡å—æ›¿æ¢) èƒ½åŠ›çš„ localhost serverã€‚è€Œ<strong>ç”Ÿäº§ç¯å¢ƒ</strong>ç›®æ ‡åˆ™è½¬ç§»è‡³å…¶ä»–æ–¹é¢ï¼Œå…³æ³¨ç‚¹åœ¨äºå‹ç¼© bundleã€æ›´è½»é‡çš„ source mapã€èµ„æºä¼˜åŒ–ç­‰ï¼Œé€šè¿‡è¿™äº›ä¼˜åŒ–æ–¹å¼æ”¹å–„åŠ è½½æ—¶é—´ã€‚ç”±äºè¦éµå¾ªé€»è¾‘åˆ†ç¦»ï¼Œæˆ‘ä»¬é€šå¸¸å»ºè®®ä¸ºæ¯ä¸ªç¯å¢ƒç¼–å†™<strong>å½¼æ­¤ç‹¬ç«‹çš„ webpack é…ç½®</strong>ã€‚</p>
<p>è™½ç„¶ï¼Œä»¥ä¸Šæˆ‘ä»¬å°† <em>ç”Ÿäº§ç¯å¢ƒ</em> å’Œ <em>å¼€å‘ç¯å¢ƒ</em> åšäº†ç»†å¾®åŒºåˆ†ï¼Œä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šéµå¾ªä¸é‡å¤åŸåˆ™(Don&rsquo;t repeat yourself - DRY)ï¼Œä¿ç•™ä¸€ä¸ª &ldquo;common(é€šç”¨)&rdquo; é…ç½®ã€‚ä¸ºäº†å°†è¿™äº›é…ç½®åˆå¹¶åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º <a class="link" href="https://github.com/survivejs/webpack-merge"  target="_blank" rel="noopener"
    ><code>webpack-merge</code></a> çš„å·¥å…·ã€‚æ­¤å·¥å…·ä¼šå¼•ç”¨ &ldquo;common&rdquo; é…ç½®ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…å†åœ¨ç¯å¢ƒç‰¹å®š(environment-specific)çš„é…ç½®ä¸­ç¼–å†™é‡å¤ä»£ç ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»å®‰è£… <code>webpack-merge</code> å¼€å§‹ï¼Œå¹¶å°†ä¹‹å‰æŒ‡å—ä¸­å·²ç»æˆå‹çš„é‚£äº›ä»£ç è¿›è¡Œåˆ†ç¦»ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">npm install --save-dev webpack-merge
</span></span></code></pre></div><h4 id="webpackdevjs">webpack.dev.js</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">merge</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;development&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devtool</span><span class="o">:</span> <span class="s1">&#39;inline-source-map&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">contentBase</span><span class="o">:</span> <span class="s1">&#39;./dist&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><h4 id="webpackprodjs">webpack.prod.js</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">merge</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack-merge&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">common</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./webpack.common.js&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">merge</span><span class="p">(</span><span class="nx">common</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><h4 id="packagejson">package.json</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;scripts&#34;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;build&#34;</span><span class="o">:</span> <span class="s2">&#34;webpack --config webpack.prod.js&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;dev-build&#34;</span><span class="o">:</span> <span class="s2">&#34;webpack serve --open --config webpack.dev.js&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><p>eslint æ£€æµ‹ä¾èµ–é—®é¢˜ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ æ³¨é‡Š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/* eslint-disable import/no-extraneous-dependencies */</span>
</span></span></code></pre></div><h3 id="source-map-è¯¦è§£">source-map è¯¦è§£</h3>
<blockquote>
<p>source-map: ä¸€ç§æä¾›æºä»£ç åˆ°æ„å»ºåä»£ç æ˜ å°„æŠ€æœ¯ ï¼ˆå¦‚æœæ„å»ºåä»£ç å‡ºé”™äº†ï¼Œé€šè¿‡æ˜ å°„å¯ä»¥è¿½è¸ªæºä»£ç é”™è¯¯ï¼‰ã€‚</p>
</blockquote>
<p>æ ¼å¼ï¼š<code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code></p>
<p><strong>source-map</strong>ï¼šå¤–éƒ¨</p>
<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>
<p><strong>inline-source-map</strong>ï¼šå†…è”</p>
<p>åªç”Ÿæˆä¸€ä¸ªå†…è” source-map</p>
<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>
<p><strong>hidden-source-map</strong>ï¼šå¤–éƒ¨</p>
<p>é”™è¯¯ä»£ç é”™è¯¯åŸå› ï¼Œä½†æ˜¯æ²¡æœ‰é”™è¯¯ä½ç½®</p>
<p>ä¸èƒ½è¿½è¸ªæºä»£ç é”™è¯¯ï¼Œåªèƒ½æç¤ºåˆ°æ„å»ºåä»£ç çš„é”™è¯¯ä½ç½®</p>
<p><strong>eval-source-map</strong>ï¼šå†…è”</p>
<p>æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ç”Ÿæˆå¯¹åº”çš„ source-mapï¼Œéƒ½åœ¨ eval</p>
<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>
<p><strong>nosources-source-map</strong>ï¼šå¤–éƒ¨</p>
<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯, ä½†æ˜¯æ²¡æœ‰ä»»ä½•æºä»£ç ä¿¡æ¯</p>
<p><strong>cheap-source-map</strong>ï¼šå¤–éƒ¨</p>
<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>
<p>åªèƒ½ç²¾ç¡®çš„è¡Œ</p>
<p><strong>cheap-module-source-map</strong>ï¼šå¤–éƒ¨</p>
<p>é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</p>
<p>module ä¼šå°† loader çš„ source map åŠ å…¥</p>
<p>ç”Ÿäº§ç¯å¢ƒï¼ševal-source-map / eval-cheap-module-souce-map</p>
<p>å¼€å‘ç¯å¢ƒï¼šsource-map / cheap-module-souce-map</p>
<h3 id="oneof">oneOf</h3>
<p>åœ¨å‰é¢æˆ‘ä»¬è®¾ç½®äº†è®¸å¤š loader è§„åˆ™ï¼Œä½†æ˜¯è¿‡å¤šçš„ loader ä¼šä½¿å¾—æ‰“åŒ…é€Ÿåº¦å˜æ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§è§„åˆ™ä½¿å¾—æ‰“åŒ…çš„æ—¶å€™åªè¿›è¡Œä¸€æ¬¡åŒ¹é…å¤„ç†ï¼Œè¿™ä¸ªè§„åˆ™å°±æ˜¯ oneOfï¼Œé…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rules</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">oneOf</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.css$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;postcss-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">test</span><span class="o">:</span> <span class="sr">/\.less$/</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">use</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;style-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;css-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;less-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;postcss-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><h3 id="tree-shaking">Tree Shaking</h3>
<p>å¾—ç›Šäº es6 æ¨¡å—çš„é™æ€åˆ†æï¼Œå¯ä»¥åœ¨æ‰“åŒ…æ—¶ç›´æ¥å»æ‰ä¸é€‚ç”¨çš„ä»£ç ã€‚</p>
<p>æ¡ä»¶ï¼š1. å¿…é¡»ä½¿ç”¨ ES6 æ¨¡å—åŒ– 2. å¼€å¯ production ç¯å¢ƒ</p>
<p>ä½œç”¨ï¼šå‡å°‘ä»£ç ä½“ç§¯</p>
<p>åœ¨ package.json ä¸­é…ç½®ï¼š<code>&quot;sideEffects&quot;: false</code> è¡¨ç¤ºæ‰€æœ‰ä»£ç éƒ½æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆéƒ½å¯ä»¥è¿›è¡Œ tree shakingï¼‰</p>
<p>è¿™æ ·ä¼šå¯¼è‡´çš„é—®é¢˜ï¼šå¯èƒ½ä¼šæŠŠ css / @babel/polyfill æ–‡ä»¶å¹²æ‰ï¼ˆå‰¯ä½œç”¨ï¼‰</p>
<p>æ‰€ä»¥å¯ä»¥é…ç½®ï¼š<code>&quot;sideEffects&quot;: [&quot;*.css&quot;, &quot;*.less&quot;]</code> ä¸ä¼šå¯¹ css/less æ–‡ä»¶ tree shaking å¤„ç†ã€‚</p>
<h3 id="ä»£ç åˆ†å‰²">ä»£ç åˆ†å‰²</h3>
<blockquote>
<p>å¤šå…¥å£æ¨¡å¼</p>
</blockquote>
<p>åœ¨è®¾ç½®ä¸­å¯ä»¥è®¾ç½® entry ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ç°å¤šå…¥å£ï¼Œæ­¤æ—¶å¯ä»¥ä»ä½†å…¥å£ä¸­å»é™¤æ‰å…¶ä»–å…¥å£çš„ importã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">index</span><span class="o">:</span> <span class="s1">&#39;./src/js/index.js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">test</span><span class="o">:</span> <span class="s1">&#39;./src/js/test.js&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><p><strong><a class="link" href="https://webpack.docschina.org/plugins/split-chunks-plugin/"  target="_blank" rel="noopener"
    >SplitChunksPlugin</a></strong></p>
<p>å¼€ç®±å³ç”¨çš„ <code>SplitChunksPlugin</code> å¯¹äºå¤§éƒ¨åˆ†ç”¨æˆ·æ¥è¯´éå¸¸å‹å¥½ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåªä¼šå½±å“åˆ°æŒ‰éœ€åŠ è½½çš„ chunksï¼Œå› ä¸ºä¿®æ”¹ initial chunks ä¼šå½±å“åˆ°é¡¹ç›®çš„ HTML æ–‡ä»¶ä¸­çš„è„šæœ¬æ ‡ç­¾ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// include all types of chunks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">chunks</span><span class="o">:</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>åŒæ—¶è¾“å‡ºæ–‡ä»¶åéœ€è¦æ·»åŠ ä¸Š <code>[chunkhash:10]</code> æ­¤ç±»å­—æ®µï¼Œå¦åˆ™è¾“å‡ºæ–‡ä»¶åç›¸åŒè€ŒæŠ¥é”™ã€‚</p>
<p>å› ä¸ºé»˜è®¤æœ€å°æ–‡ä»¶ä¸º 20kb æ‰€ä»¥å¯ä»¥ä½¿ç”¨ import åŠ¨æ€å¯¼å…¥è¯­æ³•æ¥ä½¿å¾—å¼•å…¥çš„æ–‡ä»¶å¼ºåˆ¶å•ç‹¬æ‰“åŒ…ã€‚</p>
<p>æ›´å¤šé…ç½®å¯ä»¥å‚è§å®˜ç½‘æè¿°ã€‚</p>
<p>å…¶ä»–è§ <a class="link" href="https://webpack.docschina.org/guides/code-splitting/"  target="_blank" rel="noopener"
    >ä»£ç åˆ†ç¦»</a></p>
<h3 id="æ‡’åŠ è½½">æ‡’åŠ è½½</h3>
<blockquote>
<p>æ‡’åŠ è½½æˆ–è€…æŒ‰éœ€åŠ è½½ï¼Œæ˜¯ä¸€ç§å¾ˆå¥½çš„ä¼˜åŒ–ç½‘é¡µæˆ–åº”ç”¨çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯å…ˆæŠŠä½ çš„ä»£ç åœ¨ä¸€äº›é€»è¾‘æ–­ç‚¹å¤„åˆ†ç¦»å¼€ï¼Œç„¶ååœ¨ä¸€äº›ä»£ç å—ä¸­å®ŒæˆæŸäº›æ“ä½œåï¼Œç«‹å³å¼•ç”¨æˆ–å³å°†å¼•ç”¨å¦å¤–ä¸€äº›æ–°çš„ä»£ç å—ã€‚è¿™æ ·åŠ å¿«äº†åº”ç”¨çš„åˆå§‹åŠ è½½é€Ÿåº¦ï¼Œå‡è½»äº†å®ƒçš„æ€»ä½“ä½“ç§¯ï¼Œå› ä¸ºæŸäº›ä»£ç å—å¯èƒ½æ°¸è¿œä¸ä¼šè¢«åŠ è½½ã€‚</p>
</blockquote>
<p>æ‡’åŠ è½½åŒæ—¶æ˜¯ä¸Šä¸€å°èŠ‚â€œä»£ç åˆ†ç¦»â€çš„ä¸€éƒ¨åˆ†ï¼Œä½†å› æ—¶å¸¸è¢«å•ç‹¬æåŠï¼Œè¿™é‡Œå¦åŠ ä¸€å°èŠ‚ã€‚</p>
<p>å½“æ¶‰åŠåˆ°åŠ¨æ€ä»£ç æ‹†åˆ†æ—¶ï¼Œè™½ç„¶æä¾›äº†ä¸¤ç§æŠ€æœ¯ï¼Œä½†<a class="link" href="https://webpack.docschina.org/api/module-methods/#requireensure"  target="_blank" rel="noopener"
    ><code>require.ensure</code></a> å·²ç»æ˜¯ä¸å»ºè®®ä½¿ç”¨çš„äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨ç¬¦åˆ <a class="link" href="https://github.com/tc39/proposal-dynamic-import"  target="_blank" rel="noopener"
    >ECMAScript ææ¡ˆ</a> çš„ <a class="link" href="https://webpack.docschina.org/api/module-methods/#import-1"  target="_blank" rel="noopener"
    ><code>import()</code> è¯­æ³•</a> æ¥å®ç°åŠ¨æ€å¯¼å…¥ï¼Œå› ä¸ºè¿”å›çš„æ˜¯ Promiseï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åƒ <a class="link" href="https://github.com/stefanpenner/es6-promise"  target="_blank" rel="noopener"
    >es6-promise</a> æˆ–è€… <a class="link" href="https://github.com/taylorhakes/promise-polyfill"  target="_blank" rel="noopener"
    >promise-polyfill</a> è¿™æ · polyfill åº“ï¼Œæ¥é¢„å…ˆå¡«å……(shim) <code>Promise</code> ç¯å¢ƒã€‚æ›´å¥½çš„æ–¹æ³•è¿˜æ˜¯ä½¿ç”¨[js å…¼å®¹æ€§å¤„ç†](### js å…¼å®¹æ€§å¤„ç†) çš„æ–¹æ¡ˆã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./test&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(({</span> <span class="nx">mul</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">mul</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨ <a class="link" href="https://webpack.docschina.org/api/module-methods/#magic-comments"  target="_blank" rel="noopener"
    >é­”æ³•æ³¨é‡Š</a> æ¥è®¾ç½®æ–‡ä»¶åã€åŠ è½½æ–¹å¼ã€<a class="link" href="https://webpack.docschina.org/guides/code-splitting/#prefetchingpreloading-modules"  target="_blank" rel="noopener"
    >é¢„è·å–/é¢„åŠ è½½æ¨¡å—</a></p>
<h3 id="æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº">æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº</h3>
<blockquote>
<p>æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(progressive web application - PWA)ï¼Œæ˜¯ä¸€ç§å¯ä»¥æä¾›ç±»ä¼¼äº native app(åŸç”Ÿåº”ç”¨ç¨‹åº) ä½“éªŒçš„ web app(ç½‘ç»œåº”ç”¨ç¨‹åº)ã€‚</p>
</blockquote>
<h4 id="æ·»åŠ -workbox">æ·»åŠ  Workbox</h4>
<p>æ·»åŠ  workbox-webpack-plugin æ’ä»¶ï¼Œç„¶åè°ƒæ•´é…ç½®æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm install workbox-webpack-plugin --save-dev
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">WorkboxPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;workbox-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">WorkboxPlugin</span><span class="p">.</span><span class="nx">GenerateSW</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// è¿™äº›é€‰é¡¹å¸®åŠ©å¿«é€Ÿå¯ç”¨ ServiceWorkers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="c1">// ä¸å…è®¸é—ç•™ä»»ä½•â€œæ—§çš„â€ ServiceWorkers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">clientsClaim</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">skipWaiting</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h4 id="æ³¨å†Œ-service-worker">æ³¨å†Œ Service Worker</h4>
<p>index.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="s1">&#39;serviceWorker&#39;</span> <span class="k">in</span> <span class="nx">navigator</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">navigator</span><span class="p">.</span><span class="nx">serviceWorker</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;./service-worker.js&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">registration</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// eslint-disable-next-line no-console
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;SW registered: &#39;</span><span class="p">,</span> <span class="nx">registration</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">registrationError</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// eslint-disable-next-line no-console
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;SW registration failed: &#39;</span><span class="p">,</span> <span class="nx">registrationError</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="å¤šè¿›ç¨‹æ‰“åŒ…">å¤šè¿›ç¨‹æ‰“åŒ…</h3>
<p>éœ€è¦å®‰è£… <code>thread-loader</code> æ¥å¯¹ babel æ–°å¼€è¿›ç¨‹ï¼Œä»åå­—å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ª loaderï¼Œå¯ä»¥æ·»åŠ åˆ° use ä¸­ä½¿å¾—æ‰“åŒ…æ—¶æ–°å¼€è¿›ç¨‹ï¼Œå¦å¤–è¿˜å¯ä»¥è®¾ç½®è¿›ç¨‹æ•°é‡æ¥ä¼˜åŒ–æ‰“åŒ…é€Ÿåº¦ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›ç¨‹å¯åŠ¨å¤§æ¦‚éœ€è¦ 600msï¼Œè¿›ç¨‹é€šä¿¡éœ€è¦æ¶ˆè€—æ—¶é—´ï¼Œæ‰€ä»¥åŠ ä¸Šè¯¥ loader å¹¶ä¸ä¸€å®šä¼šæœ‰æ­£å‘ä¼˜åŒ–ï¼Œåº”è¯¥è§†å…·ä½“æƒ…å†µè€Œå®šã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">loader</span><span class="o">:</span> <span class="s1">&#39;thread-loader&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">workers</span><span class="o">:</span> <span class="mi">2</span> <span class="c1">// è®¾ç½®è¿›ç¨‹æ•°ä¸º2ä¸ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="å¤–éƒ¨æ‰©å±•externals">å¤–éƒ¨æ‰©å±•(externals)</h3>
<p><a class="link" href="https://webpack.docschina.org/configuration/externals/"  target="_blank" rel="noopener"
    ><code>externals</code></a> é…ç½®é€‰é¡¹æä¾›äº†ã€Œä»è¾“å‡ºçš„ bundle ä¸­æ’é™¤ä¾èµ–ã€çš„æ–¹æ³•ã€‚å®˜ç½‘æä¾›å¤šç§æ–¹æ³•ï¼Œä»¥ä¸‹ä»‹ç»å‡ ä¸ª web å¸¸ç”¨çš„ã€‚</p>
<h4 id="æ–¹æ³•-1å­—ç¬¦ä¸²">æ–¹æ³• 1ï¼šå­—ç¬¦ä¸²</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">externals</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">jquery</span><span class="o">:</span> <span class="s1">&#39;jQuery&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>å°† jquery æ¨¡å—æ›¿æ¢ä¸ºå…¨å±€å˜é‡ jQueryã€‚</p>
<h4 id="æ–¹æ³•-2å‡½æ•°">æ–¹æ³• 2ï¼šå‡½æ•°</h4>
<blockquote>
<p><code>function ({ context, request, contextInfo, getResolve }, callback)</code> &gt; <code>function ({ context, request, contextInfo, getResolve }) =&gt; promise</code> 5.15.0+</p>
</blockquote>
<p>å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå…¥å‚ï¼š</p>
<ul>
<li>
<p>ctx (object)ï¼šåŒ…å«æ–‡ä»¶è¯¦æƒ…çš„å¯¹è±¡ã€‚</p>
<p>ctx.context (string): åŒ…å«å¼•ç”¨çš„æ–‡ä»¶ç›®å½•ã€‚</p>
<p>ctc.request (string): è¢«è¯·æ±‚å¼•å…¥çš„è·¯å¾„ã€‚</p>
<p>ctx.contextInfo (string): åŒ…å« issuer çš„ä¿¡æ¯ï¼ˆå¦‚ï¼Œlayerï¼‰</p>
<p>ctx.getResolve 5.15.0+: è·å–å½“å‰è§£æå™¨é€‰é¡¹çš„è§£æå‡½æ•°ã€‚</p>
</li>
<li>
<p>callback (function (err, result, type)): ç”¨äºæŒ‡æ˜æ¨¡å—å¦‚ä½•è¢«å¤–éƒ¨åŒ–çš„å›è°ƒå‡½æ•°</p>
</li>
</ul>
<p>å›è°ƒå‡½æ•°æ¥æ”¶ä¸‰ä¸ªå…¥å‚ï¼š</p>
<ul>
<li>
<p>err (Error): è¢«ç”¨äºè¡¨æ˜åœ¨å¤–éƒ¨å¤–å¼•ç”¨çš„æ—¶å€™æ˜¯å¦ä¼šäº§ç”Ÿé”™è¯¯ã€‚å¦‚æœæœ‰é”™è¯¯ï¼Œè¿™å°†ä¼šæ˜¯å”¯ä¸€è¢«ç”¨åˆ°çš„å‚æ•°ã€‚</p>
</li>
<li>
<p>result (string [string] object): æè¿°å¤–éƒ¨åŒ–çš„æ¨¡å—ã€‚å¯ä»¥æ¥å—å½¢å¦‚ ${type} ${path} æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…å…¶å®ƒæ ‡å‡†åŒ–å¤–éƒ¨åŒ–æ¨¡å—æ ¼å¼ï¼Œ(string, [string]ï¼Œæˆ– object)ã€‚</p>
</li>
<li>
<p>type (string): å¯é€‰çš„å‚æ•°ï¼Œç”¨äºæŒ‡æ˜æ¨¡å—çš„ç±»å‹ï¼ˆå¦‚æœå®ƒæ²¡åœ¨ result å‚æ•°ä¸­è¢«æŒ‡æ˜ï¼‰ã€‚</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">externals</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="p">({</span> <span class="nx">request</span> <span class="p">},</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="sr">/^jquery$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">request</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ä½¿ç”¨ request è·¯å¾„ï¼Œå°†ä¸€ä¸ª commonjs æ¨¡å—å¤–éƒ¨åŒ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;root jQuery&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ç»§ç»­ä¸‹ä¸€æ­¥ä¸”ä¸å¤–éƒ¨åŒ–å¼•ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">callback</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span>
</span></span></code></pre></div><p>ä»¥ä¸Šè®¾ç½®è¡¨æ˜åªå¯¹ <code>/^jquery$/</code> åŒ¹é…çš„æ¨¡å—åšå¤„ç†ï¼Œå…¶ä¸­ callback çš„å‚æ•°å«ä¹‰ä¸ºå¯ä»¥é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡è®¿é—® libraryï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ script æ ‡ç­¾ï¼‰ä¸”å…¨å±€å˜é‡ä¸º jQueryã€‚</p>
<p>ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½éœ€è¦åœ¨ index.html ä¸­é€šè¿‡ cdn å¼•å…¥ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s1">&#39;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&#39;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span></span></code></pre></div><h3 id="dll">DLL</h3>
<p><a class="link" href="https://webpack.docschina.org/plugins/dll-plugin/"  target="_blank" rel="noopener"
    ><code>DllPlugin</code></a> å’Œ <code>DllReferencePlugin</code> ç”¨æŸç§æ–¹æ³•å®ç°äº†æ‹†åˆ† bundlesï¼ŒåŒæ—¶è¿˜å¤§å¹…åº¦æå‡äº†æ„å»ºçš„é€Ÿåº¦ã€‚&ldquo;DLL&rdquo; ä¸€è¯ä»£è¡¨å¾®è½¯æœ€åˆå¼•å…¥çš„åŠ¨æ€é“¾æ¥åº“ã€‚æ¢å¥è¯è¯´å°±æ˜¯è®©æŸäº›åº“å•ç‹¬æ‰“åŒ…ï¼Œåç»­å†ç›´æ¥å¼•å…¥åˆ° build ä¸­ã€‚</p>
<p>æ³¨æ„ï¼šDLL æ‹†åˆ†å‡ºæ¥ bundles æ˜¯é€šè¿‡å•ç‹¬çš„é…ç½®æ–‡ä»¶æ¥å•ç‹¬æ‰§è¡Œ webpack æ‰“åŒ…è¿™ä¸€è¿‡ç¨‹å®ç°çš„ï¼Œä¸å¯ä¸é¡¹ç›®é…ç½®æ–‡ä»¶æ··æ·†ã€‚</p>
<p>webpack.dll.js é…ç½®ï¼š(å°† jquery å•ç‹¬æ‰“åŒ…)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æœ€ç»ˆæ‰“åŒ…ç”Ÿæˆçš„[name] --&gt; jquery
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// [&#39;jquery] --&gt; è¦æ‰“åŒ…çš„åº“æ˜¯jquery
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">jquery</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;jquery&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¾“å‡ºå‡ºå£æŒ‡å®š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;[name].js&#39;</span><span class="p">,</span> <span class="c1">// nameå°±æ˜¯jquery
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dll&#39;</span><span class="p">),</span> <span class="c1">// æ‰“åŒ…åˆ°dllç›®å½•ä¸‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">library</span><span class="o">:</span> <span class="s1">&#39;[name]_[hash]&#39;</span><span class="p">,</span> <span class="c1">// æ‰“åŒ…çš„åº“é‡Œé¢å‘å¤–æš´éœ²å‡ºå»çš„å†…å®¹å«ä»€ä¹ˆåå­—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªmanifest.json --&gt; æä¾›jqueryçš„æ˜ å°„å…³ç³»ï¼ˆå‘Šè¯‰webpackï¼šjqueryä¹‹åä¸éœ€è¦å†æ‰“åŒ…å’Œæš´éœ²å†…å®¹çš„åç§°ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DllPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;[name]_[hash]&#39;</span><span class="p">,</span> <span class="c1">// æ˜ å°„åº“çš„æš´éœ²çš„å†…å®¹åç§°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dll/manifest.json&#39;</span><span class="p">),</span> <span class="c1">// è¾“å‡ºæ–‡ä»¶è·¯å¾„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">entryOnly</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// åˆ™ä»…æš´éœ²å…¥å£ï¼Œç¡®ä¿ DLL ä¸­çš„ tree shaking æ­£å¸¸å·¥ä½œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;production&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>webpack.config.js é…ç½®ï¼š(å‘Šè¯‰ webpack ä¸éœ€è¦å†æ‰“åŒ… jqueryï¼Œå¹¶å°†ä¹‹å‰æ‰“åŒ…å¥½çš„ jquery è·Ÿå…¶ä»–æ‰“åŒ…å¥½çš„èµ„æºä¸€åŒè¾“å‡ºåˆ° build ç›®å½•ä¸‹)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// å¼•å…¥æ’ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;webpack&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">AddAssetHtmlWebpackPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;add-asset-html-webpack-plugin&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// pluginsä¸­é…ç½®ï¼š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="k">new</span> <span class="nx">HtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;./src/index.html&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å‘Šè¯‰webpackå“ªäº›åº“ä¸å‚ä¸æ‰“åŒ…ï¼ŒåŒæ—¶ä½¿ç”¨æ—¶çš„åç§°ä¹Ÿå¾—å˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">DllReferencePlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">manifest</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dll/manifest.json&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}),</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å°†æŸä¸ªæ–‡ä»¶æ‰“åŒ…è¾“å‡ºåˆ°buildç›®å½•ä¸‹ï¼Œå¹¶åœ¨htmlä¸­è‡ªåŠ¨å¼•å…¥è¯¥èµ„æº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">new</span> <span class="nx">AddAssetHtmlWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">filepath</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;dll/jquery.js&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span>
</span></span></code></pre></div><h2 id="æå‡">æå‡</h2>
<h3 id="enrty">enrty</h3>
<p>entry: å…¥å£èµ·ç‚¹</p>
<ol>
<li>
<p>string &ndash;&gt; &lsquo;./src/index.js&rsquo;ï¼Œå•å…¥å£</p>
<p>æ‰“åŒ…å½¢æˆä¸€ä¸ª chunkã€‚ è¾“å‡ºä¸€ä¸ª bundle æ–‡ä»¶ã€‚æ­¤æ—¶ chunk çš„åç§°é»˜è®¤æ˜¯ main</p>
</li>
<li>
<p>array &ndash;&gt; [&rsquo;./src/index.js&rsquo;, &lsquo;./src/add.js&rsquo;]ï¼Œå¤šå…¥å£</p>
<p>æ‰€æœ‰å…¥å£æ–‡ä»¶æœ€ç»ˆåªä¼šå½¢æˆä¸€ä¸ª chunkï¼Œè¾“å‡ºå‡ºå»åªæœ‰ä¸€ä¸ª bundle æ–‡ä»¶ã€‚</p>
<p>ï¼ˆä¸€èˆ¬åªç”¨åœ¨ HMR åŠŸèƒ½ä¸­è®© html çƒ­æ›´æ–°ç”Ÿæ•ˆï¼‰</p>
</li>
<li>
<p>objectï¼Œå¤šå…¥å£</p>
<p>æœ‰å‡ ä¸ªå…¥å£æ–‡ä»¶å°±å½¢æˆå‡ ä¸ª chunkï¼Œè¾“å‡ºå‡ ä¸ª bundle æ–‡ä»¶ï¼Œæ­¤æ—¶ chunk çš„åç§°æ˜¯ key å€¼</p>
</li>
</ol>
<h3 id="output">output</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–‡ä»¶åç§°ï¼ˆæŒ‡å®šåç§°+ç›®å½•ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;js/[name].js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è¾“å‡ºæ–‡ä»¶ç›®å½•ï¼ˆå°†æ¥æ‰€æœ‰èµ„æºè¾“å‡ºçš„å…¬å…±ç›®å½•ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ‰€æœ‰èµ„æºå¼•å…¥å…¬å…±è·¯å¾„å‰ç¼€ï¼ˆå¯ä»¥åšcdnï¼‰ --&gt; &#39;imgs/a.jpg&#39; --&gt; &#39;/imgs/a.jpg&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">publicPath</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;js/[name]_chunk.js&#39;</span><span class="p">,</span> <span class="c1">// æŒ‡å®šéå…¥å£chunkçš„åç§°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">library</span><span class="o">:</span> <span class="s1">&#39;[name]&#39;</span><span class="p">,</span> <span class="c1">// æ‰“åŒ…æ•´ä¸ªåº“åå‘å¤–æš´éœ²çš„å˜é‡å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">libraryTarget</span><span class="o">:</span> <span class="s1">&#39;window&#39;</span> <span class="c1">// å˜é‡åæ·»åŠ åˆ°å“ªä¸ªä¸Š browserï¼šwindow
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// libraryTarget: &#39;global&#39; // nodeï¼šglobal
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// libraryTarget: &#39;commonjs&#39; // conmmonjsæ¨¡å— exports
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">},</span>
</span></span></code></pre></div><h3 id="resolve">resolve</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// è§£ææ¨¡å—çš„è§„åˆ™
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// é…ç½®è§£ææ¨¡å—è·¯å¾„åˆ«å: ä¼˜ç‚¹ï¼šå½“ç›®å½•å±‚çº§å¾ˆå¤æ‚æ—¶ï¼Œç®€å†™è·¯å¾„ï¼›ç¼ºç‚¹ï¼šè·¯å¾„ä¸ä¼šæç¤º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">$css</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src/css&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// é…ç½®çœç•¥æ–‡ä»¶è·¯å¾„çš„åç¼€åï¼ˆå¼•å…¥æ—¶å°±å¯ä»¥ä¸å†™æ–‡ä»¶åç¼€åäº†ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span><span class="p">,</span> <span class="s1">&#39;.jsx&#39;</span><span class="p">,</span> <span class="s1">&#39;.css&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å‘Šè¯‰ webpack è§£ææ¨¡å—åº”è¯¥å»æ‰¾å“ªä¸ªç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">modules</span><span class="o">:</span> <span class="p">[</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;../../node_modules&#39;</span><span class="p">),</span> <span class="s1">&#39;node_modules&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¿™æ ·é…ç½®åï¼Œå¼•å…¥æ–‡ä»¶å°±å¯ä»¥è¿™æ ·ç®€å†™ï¼š<code>import '$css/index';</code></p>
<h3 id="dev-server">dev server</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">devServer</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è¿è¡Œä»£ç æ‰€åœ¨çš„ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">contentBase</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç›‘è§†contentBaseç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸€æ—¦æ–‡ä»¶å˜åŒ–å°±ä¼šreload
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">watchContentBase</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">watchOptions</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å¿½ç•¥æ–‡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ignored</span><span class="o">:</span> <span class="sr">/node_modules/</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å¯åŠ¨gzipå‹ç¼©
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">compress</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ç«¯å£å·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">port</span><span class="o">:</span> <span class="mi">5000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åŸŸå
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">host</span><span class="o">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å¼€å¯HMRåŠŸèƒ½
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">hot</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ä¸è¦æ˜¾ç¤ºå¯åŠ¨æœåŠ¡å™¨æ—¥å¿—ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">clientLogLevel</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// é™¤äº†ä¸€äº›åŸºæœ¬ä¿¡æ¯å¤–ï¼Œå…¶ä»–å†…å®¹éƒ½ä¸è¦æ˜¾ç¤º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">quiet</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å¦‚æœå‡ºé”™äº†ï¼Œä¸è¦å…¨å±æç¤º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">overlay</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æœåŠ¡å™¨ä»£ç†ï¼Œ--&gt; è§£å†³å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">proxy</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä¸€æ—¦devServer(5000)æœåŠ¡å™¨æ¥æ”¶åˆ°/api/xxxçš„è¯·æ±‚ï¼Œå°±ä¼šæŠŠè¯·æ±‚è½¬å‘åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨3000
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;/api&#39;</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">target</span><span class="o">:</span> <span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚è·¯å¾„é‡å†™ï¼šå°†/api/xxx --&gt; /xxx ï¼ˆå»æ‰/apiï¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">pathRewrite</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;^/api&#39;</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="optimization">optimization</h3>
<p>contenthash ç¼“å­˜ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šä¿®æ”¹ a æ–‡ä»¶å¯¼è‡´ b æ–‡ä»¶ contenthash å˜åŒ–ã€‚
å› ä¸ºåœ¨ index.js ä¸­å¼•å…¥ a.jsï¼Œæ‰“åŒ…å index.js ä¸­è®°å½•äº† a.js çš„ hash å€¼ï¼Œè€Œ a.js æ”¹å˜ï¼Œå…¶é‡æ–°æ‰“åŒ…åçš„ hash æ”¹å˜ï¼Œå¯¼è‡´ index.js æ–‡ä»¶å†…å®¹ä¸­è®°å½•çš„ a.js çš„ hash ä¹Ÿæ”¹å˜ï¼Œä»è€Œé‡æ–°æ‰“åŒ…å index.js çš„ hash å€¼ä¹Ÿä¼šå˜ï¼Œè¿™æ ·å°±ä¼šä½¿ç¼“å­˜å¤±æ•ˆã€‚ï¼ˆæ”¹å˜çš„æ˜¯ a.js æ–‡ä»¶ä½†æ˜¯ index.js æ–‡ä»¶çš„ hash å€¼ä¹Ÿæ”¹å˜äº†ï¼‰
è§£å†³åŠæ³•ï¼šruntimeChunk &ndash;&gt; å°†å½“å‰æ¨¡å—è®°å½•å…¶ä»–æ¨¡å—çš„ hash å•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ runtimeï¼Œè¿™æ · a.js çš„ hash æ”¹å˜åªä¼šå½±å“ runtime æ–‡ä»¶ï¼Œä¸ä¼šå½±å“åˆ° index.js æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;js/[name].[contenthash:10].js&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">path</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="nx">chunkFilename</span><span class="o">:</span> <span class="s1">&#39;js/[name].[contenthash:10]_chunk.js&#39;</span> <span class="c1">// æŒ‡å®šéå…¥å£æ–‡ä»¶çš„å…¶ä»–chunkçš„åå­—åŠ _chunk
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="nx">optimization</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">splitChunks</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">chunks</span><span class="o">:</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* ä»¥ä¸‹éƒ½æ˜¯splitChunksé»˜è®¤é…ç½®ï¼Œå¯ä»¥ä¸å†™
</span></span></span><span class="line"><span class="cl"><span class="cm">    miniSize: 30 * 1024, // åˆ†å‰²çš„chunkæœ€å°ä¸º30kbï¼ˆå¤§äº30kbçš„æ‰åˆ†å‰²ï¼‰
</span></span></span><span class="line"><span class="cl"><span class="cm">    maxSize: 0, // æœ€å¤§æ²¡æœ‰é™åˆ¶
</span></span></span><span class="line"><span class="cl"><span class="cm">    minChunks: 1, // è¦æå–çš„chunkæœ€å°‘è¢«å¼•ç”¨1æ¬¡
</span></span></span><span class="line"><span class="cl"><span class="cm">    maxAsyncRequests: 5, // æŒ‰éœ€åŠ è½½æ—¶å¹¶è¡ŒåŠ è½½çš„æ–‡ä»¶çš„æœ€å¤§æ•°é‡ä¸º5
</span></span></span><span class="line"><span class="cl"><span class="cm">    maxInitialRequests: 3, // å…¥å£jsæ–‡ä»¶æœ€å¤§å¹¶è¡Œè¯·æ±‚æ•°é‡
</span></span></span><span class="line"><span class="cl"><span class="cm">    automaticNameDelimiter: &#39;~&#39;, // åç§°è¿æ¥ç¬¦
</span></span></span><span class="line"><span class="cl"><span class="cm">    name: true, // å¯ä»¥ä½¿ç”¨å‘½åè§„åˆ™
</span></span></span><span class="line"><span class="cl"><span class="cm">    cacheGroups: { // åˆ†å‰²chunkçš„ç»„
</span></span></span><span class="line"><span class="cl"><span class="cm">      vendors: {
</span></span></span><span class="line"><span class="cl"><span class="cm">        // node_modulesä¸­çš„æ–‡ä»¶ä¼šè¢«æ‰“åŒ…åˆ°vendorsç»„çš„chunkä¸­ï¼Œ--&gt; vendors~xxx.js
</span></span></span><span class="line"><span class="cl"><span class="cm">        // æ»¡è¶³ä¸Šé¢çš„å…¬å…±è§„åˆ™ï¼Œå¤§å°è¶…è¿‡30kbã€è‡³å°‘è¢«å¼•ç”¨ä¸€æ¬¡
</span></span></span><span class="line"><span class="cl"><span class="cm">        test: /[\\/]node_modules[\\/]/,
</span></span></span><span class="line"><span class="cl"><span class="cm">        // ä¼˜å…ˆçº§
</span></span></span><span class="line"><span class="cl"><span class="cm">        priority: -10
</span></span></span><span class="line"><span class="cl"><span class="cm">      },
</span></span></span><span class="line"><span class="cl"><span class="cm">      default: {
</span></span></span><span class="line"><span class="cl"><span class="cm">        // è¦æå–çš„chunkæœ€å°‘è¢«å¼•ç”¨2æ¬¡
</span></span></span><span class="line"><span class="cl"><span class="cm">        minChunks: 2,
</span></span></span><span class="line"><span class="cl"><span class="cm">        prority: -20,
</span></span></span><span class="line"><span class="cl"><span class="cm">        // å¦‚æœå½“å‰è¦æ‰“åŒ…çš„æ¨¡å—å’Œä¹‹å‰å·²ç»è¢«æå–çš„æ¨¡å—æ˜¯åŒä¸€ä¸ªï¼Œå°±ä¼šå¤ç”¨ï¼Œè€Œä¸æ˜¯é‡æ–°æ‰“åŒ…
</span></span></span><span class="line"><span class="cl"><span class="cm">        reuseExistingChunk: true
</span></span></span><span class="line"><span class="cl"><span class="cm">      }
</span></span></span><span class="line"><span class="cl"><span class="cm">    } */</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å°†index.jsè®°å½•çš„a.jsçš„hashå€¼å•ç‹¬æ‰“åŒ…åˆ°runtimeæ–‡ä»¶ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">runtimeChunk</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="o">:</span> <span class="nx">entrypoint</span> <span class="p">=&gt;</span> <span class="sb">`runtime-</span><span class="si">${</span><span class="nx">entrypoint</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">minimizer</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// é…ç½®ç”Ÿäº§ç¯å¢ƒçš„å‹ç¼©æ–¹æ¡ˆï¼šjs/css
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">new</span> <span class="nx">TerserWebpackPlugin</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å¼€å¯ç¼“å­˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">cache</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å¼€å¯å¤šè¿›ç¨‹æ‰“åŒ…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">parallel</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// å¯ç”¨sourceMap(å¦åˆ™ä¼šè¢«å‹ç¼©æ‰)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">sourceMap</span><span class="o">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="webpack-ä¸­çš„é»˜è®¤é…ç½®">webpack ä¸­çš„é»˜è®¤é…ç½®</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">entry</span><span class="o">:</span> <span class="s2">&#34;./src/index.js&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">output</span><span class="p">.</span><span class="nx">path</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&#34;dist&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">output</span><span class="p">.</span><span class="nx">filename</span><span class="o">:</span> <span class="s2">&#34;[name].js&#34;</span>
</span></span></code></pre></div><h2 id="é¢˜å¤–è¯">é¢˜å¤–è¯</h2>
<p>webpack ä¸œè¥¿å¤ªå¤šäº†ï¼ï¼ï¼è¿™å­¦çš„è„‘ç“œå­éš¾å—ï¼Œæ„Ÿè§‰å—åˆ°äº† dos æ”»å‡»ï¼Œæˆ‘å¤§è„‘éƒ½è¦æ‹’ç»æœåŠ¡ï¼ˆ<del>æ‹’ç»æ€è€ƒ</del>ï¼‰äº†ï¼Œä¸è¿‡å­¦çš„æ—¶å€™çœ‹å¼¹å¹•å…¶ä»–äººéƒ½æ˜¯å…ˆç”¨ vue åå­¦ webpackï¼Œæˆ‘è¿™ç›´æ¥ä¸Šæ¥å°± webpackï¼ŒçœŸçš„å¤´å¤§ã€‚è¿˜æœ‰ï¼Œè¿™ç¬”è®°è®°å½•çš„åªä¸è¿‡ webpack çš„å†°å±±ä¸€è§’ï¼Œçœ‹çœ‹å®˜æ–¹æ–‡æ¡£çš„ç›®å½•å°±ç›´æ¥è·ªäº†ï¼Œæ›´ä¸è¦æå†™è‡ªå·±çš„ loader å’Œ plugin äº†ï¼Œå­¦æ— æ­¢å¢ƒï¼Œwebpack å…ˆåˆ°æ­¤ä¸ºæ­¢å§ï¼Œå•¥æ—¶å€™æœ‰æ—¶é—´å†å•ƒæ–‡æ¡£ï¼ŒçœŸå°¼ç›å¤šã€‚</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            
            
            <a href="/tags/node/">node</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-ND 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2021 - 
        
        2022 Tian Jiale&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.13.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#webpack-ç®€ä»‹">webpack ç®€ä»‹</a>
      <ol>
        <li><a href="#webpack-æ˜¯ä»€ä¹ˆ">webpack æ˜¯ä»€ä¹ˆ</a></li>
        <li><a href="#webpack-äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ">webpack äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ</a></li>
      </ol>
    </li>
    <li><a href="#webpack-çš„ç®€æ˜“ä½¿ç”¨">webpack çš„ç®€æ˜“ä½¿ç”¨</a>
      <ol>
        <li><a href="#åˆå§‹åŒ–é…ç½®">åˆå§‹åŒ–é…ç½®</a></li>
        <li><a href="#ç¼–è¯‘æ‰“åŒ…åº”ç”¨">ç¼–è¯‘æ‰“åŒ…åº”ç”¨</a></li>
      </ol>
    </li>
    <li><a href="#webpack-å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®">webpack å¼€å‘ç¯å¢ƒçš„åŸºæœ¬é…ç½®</a>
      <ol>
        <li><a href="#åˆ›å»ºé…ç½®æ–‡ä»¶">åˆ›å»ºé…ç½®æ–‡ä»¶</a></li>
        <li><a href="#æ‰“åŒ…æ ·å¼èµ„æº">æ‰“åŒ…æ ·å¼èµ„æº</a></li>
        <li><a href="#æ‰“åŒ…-html-èµ„æº">æ‰“åŒ… HTML èµ„æº</a></li>
        <li><a href="#æ‰“åŒ…å›¾ç‰‡èµ„æº">æ‰“åŒ…å›¾ç‰‡èµ„æº</a></li>
        <li><a href="#æ‰“åŒ…å…¶ä»–èµ„æº">æ‰“åŒ…å…¶ä»–èµ„æº</a></li>
        <li><a href="#source-map">source map</a></li>
        <li><a href="#å¼€å‘å·¥å…·">å¼€å‘å·¥å…·</a></li>
      </ol>
    </li>
    <li><a href="#webpack-ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®">webpack ç”Ÿäº§ç¯å¢ƒçš„åŸºæœ¬é…ç½®</a>
      <ol>
        <li><a href="#å¯ç”¨-source-map">å¯ç”¨ source map</a></li>
        <li><a href="#æå–æ‰€æœ‰çš„-css-åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­">æå–æ‰€æœ‰çš„ CSS åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</a></li>
        <li><a href="#css-å…¼å®¹æ€§å¤„ç†">css å…¼å®¹æ€§å¤„ç†</a></li>
        <li><a href="#å‹ç¼©-css">å‹ç¼© css</a></li>
        <li><a href="#js-è¯­æ³•æ£€æŸ¥-eslint">js è¯­æ³•æ£€æŸ¥ Eslint</a></li>
        <li><a href="#js-å…¼å®¹æ€§å¤„ç†">js å…¼å®¹æ€§å¤„ç†</a></li>
        <li><a href="#js-å‹ç¼©">js å‹ç¼©</a></li>
      </ol>
    </li>
    <li><a href="#æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½æå‡">æ€§èƒ½ä¼˜åŒ–/åŠŸèƒ½æå‡</a>
      <ol>
        <li><a href="#æ¨¡å—çƒ­æ›¿æ¢hot-module-replacement">æ¨¡å—çƒ­æ›¿æ¢(hot module replacement)</a></li>
        <li><a href="#ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒé…ç½®åˆ†ç¦»">ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒé…ç½®åˆ†ç¦»</a>
          <ol>
            <li><a href="#webpackdevjs">webpack.dev.js</a></li>
            <li><a href="#webpackprodjs">webpack.prod.js</a></li>
            <li><a href="#packagejson">package.json</a></li>
          </ol>
        </li>
        <li><a href="#source-map-è¯¦è§£">source-map è¯¦è§£</a></li>
        <li><a href="#oneof">oneOf</a></li>
        <li><a href="#tree-shaking">Tree Shaking</a></li>
        <li><a href="#ä»£ç åˆ†å‰²">ä»£ç åˆ†å‰²</a></li>
        <li><a href="#æ‡’åŠ è½½">æ‡’åŠ è½½</a></li>
        <li><a href="#æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº">æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº</a>
          <ol>
            <li><a href="#æ·»åŠ -workbox">æ·»åŠ  Workbox</a></li>
            <li><a href="#æ³¨å†Œ-service-worker">æ³¨å†Œ Service Worker</a></li>
          </ol>
        </li>
        <li><a href="#å¤šè¿›ç¨‹æ‰“åŒ…">å¤šè¿›ç¨‹æ‰“åŒ…</a></li>
        <li><a href="#å¤–éƒ¨æ‰©å±•externals">å¤–éƒ¨æ‰©å±•(externals)</a>
          <ol>
            <li><a href="#æ–¹æ³•-1å­—ç¬¦ä¸²">æ–¹æ³• 1ï¼šå­—ç¬¦ä¸²</a></li>
            <li><a href="#æ–¹æ³•-2å‡½æ•°">æ–¹æ³• 2ï¼šå‡½æ•°</a></li>
          </ol>
        </li>
        <li><a href="#dll">DLL</a></li>
      </ol>
    </li>
    <li><a href="#æå‡">æå‡</a>
      <ol>
        <li><a href="#enrty">enrty</a></li>
        <li><a href="#output">output</a></li>
        <li><a href="#resolve">resolve</a></li>
        <li><a href="#dev-server">dev server</a></li>
        <li><a href="#optimization">optimization</a></li>
        <li><a href="#webpack-ä¸­çš„é»˜è®¤é…ç½®">webpack ä¸­çš„é»˜è®¤é…ç½®</a></li>
      </ol>
    </li>
    <li><a href="#é¢˜å¤–è¯">é¢˜å¤–è¯</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<script type="text/javascript">
    console.log("%c aecra %c Leave a dialogue for the years to comeï¼ ","color: #fff; margin: 1em 0; padding: 5px 0; background: #3498db;","margin: 1em 0; padding: 5px 0; background: #efefef;");
</script>
<script>
    
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?63f15ba6b5eafecd5a7d2290491d47ce";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
    </body>
</html>
